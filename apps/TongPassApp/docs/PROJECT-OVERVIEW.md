# 통패스(TongPass) 근로자 앱 프로젝트 개요

## 1. 서비스 소개

### 1.1 서비스명
**통패스 근로자 앱 (TongPass Worker App)**

### 1.2 서비스 목적
QR 코드 기반 산업현장 출퇴근 관리 서비스의 **근로자용 모바일 앱**으로, 근로자가 직접 출퇴근을 기록하고 본인의 근무 현황을 확인할 수 있다.

### 1.3 핵심 가치
- **간편한 출퇴근**: 앱에서 버튼 한 번으로 출퇴근 기록
- **실시간 상태 확인**: 본인의 출퇴근 상태 즉시 확인
- **안전한 인증**: 전화번호 인증 + 전자서명으로 본인 확인
- **승인 기반 등록**: 관리자 승인 후 앱 사용 가능

### 1.4 타겟 사용자
- **대상**: 건설/제조 현장 근로자
- **규모**: 50인 내외 중소 제조업체 (약 10개 업체, 총 500명)

---

## 2. 관련 서비스

| 앱 | 대상 | 플랫폼 | 주요 기능 |
|----|------|--------|-----------|
| **관리자 웹 (admin-web)** | 현장 관리자 | 웹 (React) | 대시보드, QR 스캔, 현장/인원 설정 |
| **근로자 앱 (TongPassApp)** | 현장 근로자 | 모바일 (React Native) | 회원가입, 출퇴근 기록 |

---

## 3. 주요 기능

### 3.1 회원가입 플로우

```
회사코드 입력 → 전화번호 인증 → 근로자 정보 입력 → 약관 동의 → 전자서명 → 승인 대기
```

| 단계 | 화면 | 설명 |
|:----:|------|------|
| 1 | 회사코드 입력 | 4~10자리 회사 고유 코드 입력 |
| 2 | 전화번호 인증 | SMS 인증번호 발송 및 확인 (3분 제한) |
| 3 | 근로자 정보 | 이름, 생년월일, 성별, 이메일(선택) 입력 |
| 4 | 약관 동의 | 서비스 이용약관, 개인정보 수집 등 4개 약관 |
| 5 | 전자서명 | 캔버스에 직접 서명 |
| 6 | 승인 대기 | 관리자 승인 대기 상태 |

### 3.2 출퇴근 기능

| 상태 | 코드 | 버튼 색상 | 동작 |
|------|------|----------|------|
| **미출근** | `WORK_OFF` | 파랑 | 출근하기 버튼 활성화 |
| **출근 중** | `WORK_ON` | 빨강 | 퇴근하기 버튼 활성화 |
| **퇴근 완료** | `WORK_DONE` | 회색 | 버튼 비활성화 |

### 3.3 근로자 상태

| 상태 | 코드 | 설명 |
|------|------|------|
| **대기** | `PENDING` | 가입 전 초기 상태 |
| **요청됨** | `REQUESTED` | 가입 요청 완료, 관리자 승인 대기 |
| **활성** | `ACTIVE` | 승인 완료, 앱 사용 가능 |
| **비활성** | `INACTIVE` | 일시 정지 상태 |
| **차단** | `BLOCKED` | 접근 차단 상태 |

---

## 4. 조직 체계

### 4.1 조직 계층 (3단계)
```
회사 (Company)
└── 현장 (Site)              예: 대전공장, 서울본사
    └── 팀 (Team)            예: 생산1팀, 협력업체A
        └── 근로자 (Worker)
```

### 4.2 사용자 역할

| 역할 코드 | 명칭 | 범위 | 앱 접근 |
|-----------|------|------|:-------:|
| `SUPER_ADMIN` | 최고 관리자 | 회사 전체 | 웹 전용 |
| `SITE_ADMIN` | 현장 관리자 | 특정 현장 | 웹 전용 |
| `TEAM_ADMIN` | 팀 관리자 | 특정 팀 | 웹 + 앱 |
| `WORKER` | 근로자 | 본인 | 앱 전용 |

---

## 5. 화면 구성

### 5.1 인증 플로우 (AuthStack)

| 화면 | 파일명 | 주요 기능 |
|------|--------|---------|
| 회사코드 입력 | `CompanyCodeScreen.tsx` | 회사코드 검증 API 호출 |
| 전화번호 인증 | `PhoneVerifyScreen.tsx` | SMS 인증번호 요청/확인 |
| 근로자 정보 | `WorkerInfoScreen.tsx` | 정보 입력, 선등록 데이터 표시 |
| 약관 동의 | `TermsScreen.tsx` | 4개 약관 동의 체크 |
| 전자서명 | `SignatureScreen.tsx` | 서명 캔버스, 가입 요청 |
| 승인 대기 | `WaitingScreen.tsx` | 승인 상태 확인 |

### 5.2 메인 화면 (MainStack)

| 화면 | 파일명 | 주요 기능 |
|------|--------|---------|
| 홈 | `HomeScreen.tsx` | 출퇴근 버튼, 사용자 정보 표시 |

---

## 6. 데이터 모델

### 6.1 근로자 (Worker)

```typescript
interface Worker {
  id: string;
  phoneNumber: string;
  name: string;
  birthDate: string;       // YYYYMMDD 형식
  isSenior: boolean;       // 만 65세 이상
  gender: 'M' | 'F';
  nationality: string;
  jobTitle: string;
  status: WorkerStatus;
  signatureUrl?: string;
  companyId: string;
  siteId: string;
  teamId: string;
}
```

### 6.2 회사/현장/팀

```typescript
interface Company {
  id: string;
  name: string;
  code: string;            // 회사코드 (4~10자리)
  logo?: string;
}

interface Site {
  id: string;
  name: string;
  address: string;
  companyId: string;
}

interface Team {
  id: string;
  name: string;
  siteId: string;
}
```

---

## 7. 고령자 관리

- **기준**: 만 65세 이상
- **생년월일 기반 자동 계산**
- `isSenior` 플래그로 관리
- 관리자 대시보드에서 별도 모니터링

---

## 8. 약관 목록

| 순번 | 약관명 | 필수 여부 |
|:----:|--------|:--------:|
| 1 | 서비스 이용약관 | 필수 |
| 2 | 개인정보 수집 및 이용 동의 | 필수 |
| 3 | 개인정보 제3자 제공 동의 | 필수 |
| 4 | 위치기반 서비스 이용약관 | 필수 |

---

## 9. 버전 정보

| 버전 | 날짜 | 주요 변경 |
|------|------|---------|
| v1.0.0 | 2025-01 | 초기 프로젝트 설정, 인증 플로우 구현 |

---

## 10. 관련 문서

- [기술 아키텍처](./ARCHITECTURE.md)
- [API 명세](./API.md)
- [개발 가이드](./DEVELOPMENT.md)
