# 위험성평가 기획서

> **Version:** 1.0
> **작성일:** 2026.01.12
> **프로젝트:** tong-pass (산업현장통 2.0)

---

## 1. 개요

### 1.1 목적
산업현장의 **위험성평가** 문서를 전자화하여 관리하고, **문서전자결재** 시스템과 연동하여 효율적인 안전관리를 지원합니다.

### 1.2 핵심 철학

| 철학 | 설명 |
|------|------|
| **깔때기 전략** | 18,507건 위험요인 DB → 공종/키워드 필터 → 50~500건 선택 |
| **서류는 PC, 현장은 Mobile** | 관리자(PC): 문서 작성/승인 / 근로자(Mobile): TBM 실행/서명 |
| **설명 가능한 AI** | 추천 시 "왜 이걸 추천했는지" 점수와 근거 표시 |

### 1.3 법적 근거
- **산업안전보건법 제36조**: 모든 사업장은 위험성평가를 실시해야 함
- **중대재해처벌법**: 미실시 시 경영자 처벌 가능

---

## 2. 위험성평가 종류 (4가지)

> **중요:** TBM은 위험성평가와 **별도 기능**입니다.

| # | 종류 | 코드 | 시기 | 설명 |
|:-:|------|------|------|------|
| ① | **수시** | `OCCASIONAL` | 변경 발생 시 | 새 장비 도입, 공정 변경, 사고 발생 등 |
| ② | **최초** | `INITIAL` | 사업 시작 시 | 사업장 창업일 이내 1개월 이내 |
| ③ | **정기** | `REGULAR` | 매년 1회+ | 최초 평가 이후 정기적으로 |
| ④ | **상시** | `CONTINUOUS` | 수시로 | 일상적인 위험요인 관리 |

### 2.1 TBM과의 관계

```
위험성평가 (문서)          TBM (일일 작업)
──────────────          ──────────────
• 4종류 (수시/최초/정기/상시)   • 매일 작업 전 수행
• 결재 필요                  • 위험성평가 불러오기 가능
• 문서로 보관                • 서명/확인 기록
         ↑                        │
         └──────── 불러오기 ────────┘
```

---

## 3. 위험성 수준 판정

### 3.1 방법 1: 상/중/하 (간편법)

| 수준 | 의미 | 색상 | 관리 수준 |
|:----:|------|:----:|:--------:|
| **상** | 사망·중상 위험, 즉시 조치 | 🔴 빨강 `#dc2626` | 중점 관리 |
| **중** | 부상 위험, 개선 계획 수립 | 🟡 노랑 `#f59e0b` | 점검 관리 |
| **하** | 경미한 위험, 현 수준 유지 | 🟢 초록 `#10b981` | 일상 관리 |

### 3.2 방법 2: 빈도×강도 (정밀법)

**등급 계산표:**

|  | 최상(5) | 상(4) | 중(3) | 하(2) | 최하(1) |
|:---:|:---:|:---:|:---:|:---:|:---:|
| **최대(4)** | 🔴 높음(20) | 🔴 높음(16) | 🟠 보통(12) | 🟡 보통(8) | 🟢 낮음(4) |
| **대(3)** | 🔴 높음(15) | 🟠 보통(12) | 🟠 보통(9) | 🟡 보통(6) | 🟢 낮음(3) |
| **중(2)** | 🟠 보통(10) | 🟡 낮음(8) | 🟡 낮음(6) | 🟢 낮음(4) | 🟢 낮음(2) |
| **소(1)** | 🟡 낮음(5) | 🟢 낮음(4) | 🟢 낮음(3) | 🟢 낮음(2) | 🟢 낮음(1) |

**평가 결과:**

| 점수 | 등급 | 관리 수준 | 색상 |
|:----:|:----:|:--------:|:----:|
| 15~20 | 고등급 | 중점 관리 | 🔴 빨강 |
| 7~14 | 중등급 | 점검 관리 | 🟡 노랑 |
| 1~6 | 하등급 | 일상 관리 | 🟢 초록 |

---

## 4. 사용자 시나리오

### 4.1 주요 사용자

| 역할 | 사용자 | 주요 기기 | 주요 작업 |
|------|--------|:--------:|----------|
| **안전관리자** | 현장 안전팀 | PC | 위험성평가 작성, 결재 요청 |
| **현장소장** | 현장 총괄 | PC | 최종 승인, 통계 확인 |
| **협력사 관리자** | 협력업체 담당 | PC | 자기 회사 평가 작성 |
| **근로자** | 현장 작업자 | Mobile | 서명, 확인 |

### 4.2 시나리오: 수시 위험성평가 작성

> **김안전 대리**는 강서23 현장의 안전관리자입니다.
> 내일부터 **지게차 운반작업**이 시작되어 수시 위험성평가를 작성해야 합니다.

**Step 1. 메뉴 진입**
- PC에서 현장통 관리자 페이지 접속
- 사이드바 > 중대재해 점검사항 > [위험성 평가] 클릭

**Step 2. 위험성평가 만들기**
- [위험성평가 만들기] 버튼 클릭
- 4가지 유형 중 "① 수시 위험성 평가" 선택
- [위험성평가 만들기] 버튼 클릭

**Step 3. 기본 정보 입력**
- 평가 구분: "수시 위험성평가" (자동 선택됨)
- 현장명: 강서23 태조 삼성 (자동, 변경 불가)
- 소속 회사: (주)삼성건설
- 위험성 수준: 빈도×강도 선택
- 작업 기간: 시작일 ~ 종료일

**Step 4. 결재라인 선택**
- 설정에서 미리 만든 결재라인 템플릿 중 선택
- 또는 새 결재라인 생성

**Step 5. 위험요인 선택 (AI 추천)**
- 대분류: "제조업" 선택
- 키워드: "지게차, 운반" 입력
- [AI 추천 실행] 버튼 클릭
- 50건의 위험요인이 점수순으로 추천됨
- 우리 현장에 맞는 항목 15개 체크

**Step 6. 검토 및 저장**
- 입력 내용 확인
- [임시 저장] 또는 [결재 요청] 버튼 클릭

---

## 5. 화면 구성

### 5.1 전체 화면 목록

| # | 화면 | 설명 | 우선순위 |
|:-:|------|------|:--------:|
| 1 | 목록 | 위험성평가 문서 리스트 | 높음 |
| 2 | 만들기 - 유형 선택 | 4종 중 선택 | 높음 |
| 3 | 만들기 - 폼 | 기본정보 + 결재라인 + 위험요인 | 높음 |
| 4 | 상세보기 | 작성된 평가서 확인 | 높음 |
| 5 | AI 추천 | 위험요인 검색/추천 | 중간 |

### 5.2 목록 화면

```
┌─────────────────────────────────────────────────────────────────────┐
│  위험성 평가                              [+ 위험성평가 만들기]      │
│  현장의 위험성평가 문서를 관리합니다                                 │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  구분  [전체보기] [수시] [최초] [정기] [상시]                        │
│                                                                     │
├─────────────────────────────────────────────────────────────────────┤
│  작업기간   │ 작업공종    │ 작업자 │ 구분 │ 상태      │ 결재근로자 │
│ ─────────────────────────────────────────────────────────────────── │
│  01-10~20  │ 가설사무실  │ 강일동 │ 수시 │ 🟠작업대기중│ 7명       │
│  01-05~15  │ 가설펜스    │ 강일동 │ 수시 │ ⬜작업종료  │ 5명       │
│  01-01~12-31│ 전체 공종  │ 김안전 │ 최초 │ 🟢승인완료  │ 45명      │
└─────────────────────────────────────────────────────────────────────┘
```

**상태 뱃지:**

| 상태 | 코드 | 색상 |
|------|------|------|
| 작성중 | `DRAFT` | 🟡 노랑 `bg-yellow-100` |
| 결재대기 | `PENDING` | 🔵 파랑 `bg-blue-100` |
| 승인완료 | `APPROVED` | 🟢 초록 `bg-green-100` |
| 반려 | `REJECTED` | 🔴 빨강 `bg-red-100` |
| 작업대기중 | `IN_PROGRESS` | 🟠 오렌지 `bg-orange-100` |
| 작업종료 | `COMPLETED` | ⬜ 회색 `bg-gray-100` |

### 5.3 만들기 화면 - 유형 선택

```
┌─────────────────────────────────────────────────────────────────────┐
│  < 위험성평가 만들기                                                 │
├───────────────────────────┬─────────────────────────────────────────┤
│                           │                                         │
│  ① 수시 위험성 평가  ✓    │  ① 수시 위험성 평가 만들기부터          │
│     (선택됨 - 오렌지 배경) │                                         │
│                           │  위험성 평가 후, 각 위험사항을           │
│  ② 최초 위험성 평가       │  위험성평가에게 취합...                  │
│                           │                                         │
│  ③ 정기 위험성 평가       │  1. 각 업체별 위험성평가 만들기         │
│                           │  2. 해당 작업 공종과 위험성등급 선택    │
│  ④ 상시 위험성 평가       │  3. 적기 검토 / 초기 공종 없으면        │
│                           │  4. 이전 위험성 평가 불러오기           │
│                           │  5. 위험성 수준 선택                    │
│                           │                                         │
│                           │        [위험성평가 만들기]              │
└───────────────────────────┴─────────────────────────────────────────┘
```

### 5.4 만들기 화면 - 폼 (Step by Step)

**Step 1: 기본 정보**
- 평가 구분 (자동 선택됨)
- 현장명 (고정, 현재 대시보드 현장)
- 소속 회사 (입력)
- 위험성 수준 방법 (상중하 / 빈도강도)
- 작업 기간 (시작일 ~ 종료일)

**Step 2: 결재라인 선택**
- 설정에서 만든 결재라인 템플릿 목록
- 선택하면 결재자 미리보기 표시
- 결재라인 없으면 → 설정으로 이동 안내

**Step 3: 위험요인 선택**
- 대분류 선택 (건설-토목/건축/플랜트, 제조업, 기타)
- 키워드 입력 (쉼표 구분)
- [AI 추천] 버튼 → 위험요인 목록 표시
- 체크박스로 선택

**Step 4: 검토 및 저장**
- 입력 내용 요약
- [임시 저장] / [결재 요청] 버튼

---

## 6. 결재라인 연동

### 6.1 결재라인 템플릿 시스템

위험성평가에서는 **설정에서 미리 만든 결재라인 템플릿**을 선택합니다.

```
[설정 > 결재라인 설정]
        │
        │ 템플릿 미리 생성
        ▼
┌─────────────────────────────────┐
│ 결재라인 1 (위험성평가용)        │
│ 근로자대표 → 안전관리자 → 현장소장│
└─────────────────────────────────┘
        │
        │ 위험성평가 작성 시 선택
        ▼
[위험성평가 만들기 > Step 2]
```

### 6.2 결재라인 없는 경우

위험성평가 작성 시 결재라인이 없으면:
- 팝업: "결재라인이 설정되어 있지 않습니다. 설정 페이지로 이동하시겠습니까?"
- [설정으로 이동] / [취소] 버튼

---

## 7. AI 추천 시스템

### 7.1 깔때기 전략 (Funnel Strategy)

```
[전체 DB: 18,507건]
        ↓ 1단계: 대분류 선택 (건설/제조 등)
[후보군: ~2,000건]
        ↓ 2단계: 키워드 검색 (지게차, 용접 등)
[추천 결과: ~100건]
        ↓ 3단계: 사용자 직접 선택
[최종 평가서: ~50건]
```

### 7.2 스코어링 규칙 (v1.1)

| 항목 | 점수 | 조건 |
|------|:----:|------|
| 키워드 적합도 | +40 | 작업명(task_name)에 키워드 포함 |
| | +20 | 위험요인(risk_factor)에 키워드 포함 |
| | +10 | 대책(measures)에 키워드 포함 |
| 재해형태 가중치 | +30 | 고위험: 떨어짐, 끼임, 질식, 화재폭발 |
| 복합 매칭 | +30 | 2개 이상 키워드 동시 매칭 |

**최대 점수:** 140점

### 7.3 대분류별 자동 키워드

| 대분류 | 자동 추가 키워드 |
|--------|----------------|
| 건설업-토목 | 굴착, 흙막이, 터널, 교량, 포장, 파일, 옹벽 |
| 건설업-건축 | 비계, 거푸집, 철근, 콘크리트, 마감, 방수, 단열 |
| 건설업-플랜트 | 배관, 용접, 탱크, 압력용기, 밸브, 펌프, 보일러 |
| 제조업 | 프레스, 컨베이어, 로봇, CNC, 사출, 절단기, 지게차 |

---

## 8. 재해형태 분류 (13개)

| # | 재해형태 | 고위험 여부 |
|:-:|----------|:----------:|
| 1 | 떨어짐 | ⚠️ 고위험 |
| 2 | 끼임 | ⚠️ 고위험 |
| 3 | 질식 | ⚠️ 고위험 |
| 4 | 화재폭발 | ⚠️ 고위험 |
| 5 | 부딪힘 | |
| 6 | 맞음 | |
| 7 | 넘어짐 | |
| 8 | 무너짐 | |
| 9 | 감전 | |
| 10 | 절단베임 | |
| 11 | 근골격계 | |
| 12 | 교통사고 | |
| 13 | 기타 | |

---

## 9. 향후 기능 (Phase 2)

| 기능 | 우선순위 | 설명 |
|------|:--------:|------|
| 엑셀 다운로드 | 높음 | 위험성평가표 엑셀 파일 생성 |
| PDF 다운로드 | 높음 | 출력용 PDF 생성 |
| 결재 알림 | 높음 | 결재 요청 시 푸시 알림 |
| TBM 연동 | 중간 | 위험성평가 불러오기 기능 |
| 히스토리 | 중간 | 수정 이력 관리 |
| 통계 대시보드 | 중간 | 재해형태별 통계 |

---

## 10. 참고 자료

| 문서 | 위치 | 설명 |
|------|------|------|
| 개발 명세서 | `docs/risk-assessment/위험성평가_개발명세서.md` | 기술 상세 |
| 결재 시스템 | `docs/risk-assessment/결재시스템_명세서.md` | 결재라인 설계 |
| Figma 디자인 | `tong-riskmanagement/reference/figma/` | UI 디자인 참조 |
| 위험요인 DB | `safety_master.db` (18,507건) | AI 추천 데이터 |
