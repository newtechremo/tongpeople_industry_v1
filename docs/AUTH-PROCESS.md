# 통패스 가입/인증 프로세스 기획

## 1. 개요

### 1.1 가입 경로 분기

```
┌─────────────────────────────────────────────────────────────────────┐
│                        가입 경로 분기                                │
├─────────────────────────────────┬───────────────────────────────────┤
│      관리자 웹 (직접 가입)         │      근로자 앱 (초대 가입)          │
│                                 │                                   │
│  • 최초 회사 등록               │  • 초대 링크/코드로 진입            │
│  • SUPER_ADMIN 생성             │  • 본인인증만으로 즉시 활성화        │
│  • 현장/팀 초기 설정             │  • WORKER / TEAM_ADMIN            │
└─────────────────────────────────┴───────────────────────────────────┘
```

### 1.2 핵심 설계 원칙

| 원칙 | 적용 |
|------|------|
| **문턱 낮추기** | 근로자는 휴대폰 인증만으로 30초 내 가입 완료 |
| **허수 방지** | 모든 가입에 휴대폰 인증 필수 |
| **타이핑 최소화** | 드롭다운, 자동완성, 주소 검색 적극 활용 |
| **점진적 정보 수집** | 필수만 먼저, 나머지는 설정에서 |
| **즉시 사용 가능** | 가입 완료 = 바로 QR 사용 가능 |
| **역할별 최적화** | 관리자는 상세하게, 근로자는 간단하게 |
| **휴대폰 번호 = ID** | 모든 사용자가 휴대폰 번호로 로그인 (이메일 X) |

---

## 2. 최초 관리자 가입 (SUPER_ADMIN)

웹에서 회사를 처음 등록하는 관리자 플로우입니다.

### Step 1: 개인 계정 생성

**목표**: 문턱 낮추기 + 허수 가입 방지

| 입력 항목 | 필수 | 비고 |
|----------|:----:|------|
| 이름 | ✓ | |
| 휴대폰 번호 | ✓ | SMS 인증 |
| 약관 동의 | ✓ | 전체 동의 옵션 제공 |

**UX 포인트**:
- 이메일/비밀번호는 이 단계에서 받지 않음
- 휴대폰 인증 먼저 → 실사용자 확보
- "1분 안에 시작하기" 느낌

**화면 예시**:
```
┌─────────────────────────────────────────┐
│  통패스 시작하기                         │
├─────────────────────────────────────────┤
│                                         │
│  이름         [홍길동          ]         │
│  휴대폰 번호  [010-1234-5678   ] [인증]  │
│  인증번호     [      ]                   │
│                                         │
│  ☑️ 전체 동의                            │
│    ☑️ 이용약관 동의 (필수)               │
│    ☑️ 개인정보 처리방침 동의 (필수)       │
│    ☑️ 마케팅 정보 수신 (선택)            │
│                                         │
│           [ 다음 ]                       │
└─────────────────────────────────────────┘
```

### Step 2: 회사 정보 입력

**목표**: 서비스 이용을 위한 필수 기업 정보 수집

| 입력 항목 | 필수 | UI | 비고 |
|----------|:----:|-----|------|
| 회사명 | ✓ | 텍스트 | |
| 대표자명 | ✓ | 텍스트 | |
| 본사 주소 | ✓ | 주소 검색 | 다음 주소 API 등 활용 |
| 사업자등록번호 | ✓ | 텍스트 | 형식 검증 (000-00-00000) |
| 대표 업종코드 | - | 드롭다운 + 검색 | 나중에 설정에서 입력 가능 |
| 직원 수 | - | 라디오 버튼 | 나중에 설정에서 입력 가능 |
| 가입 경로 | - | 드롭다운 | 마케팅 분석용 |

**화면 예시**:
```
┌─────────────────────────────────────────┐
│  회사 정보를 입력해주세요                 │
├─────────────────────────────────────────┤
│                                         │
│  회사명 *        [(주)통하는사람들  ]     │
│  대표자명 *      [홍길동           ]     │
│  본사 주소 *     [서울특별시 강남구 ] 🔍  │
│                 [테헤란로 123      ]     │
│  사업자등록번호 * [123-45-67890    ]      │
│                                         │
│  ─────── 선택 입력 (나중에 가능) ───────  │
│                                         │
│  대표 업종       [[F] 건설업 ▼     ]     │
│  직원 수         ○ 5인 미만              │
│                 ○ 5인 ~ 49인            │
│                 ● 50인 ~ 299인          │
│                 ○ 300인 이상            │
│                 ○ 기타                  │
│                                         │
│           [ 다음 ]                       │
└─────────────────────────────────────────┘
```

**입력 완료 후 확인 화면** (설정에서 조회 시):
```
┌─────────────────────────────────────────┐
│  회사 정보                               │
├─────────────────────────────────────────┤
│                                         │
│  회사명          (주)통하는사람들         │
│  대표자명        홍길동                  │
│  본사 주소       서울특별시 강남구        │
│                 테헤란로 123            │
│  사업자등록번호   123-45-67890           │
│  대표 업종코드   [F] 건설업              │
│  직원 수         50인 ~ 299인           │
│  시간대          Asia/Seoul             │
│                                         │
│  ─────── 담당자 정보 ───────             │
│                                         │
│  전산 관리자     (미입력)                │
│  결제 담당자     (미입력)                │
│                                         │
│           [ 수정 ]                       │
└─────────────────────────────────────────┘
```

**업종 선택 옵션** (10차 대분류 기준 + 기타):

| 코드 | 업종명 |
|:----:|--------|
| A | 농업, 임업 및 어업 |
| B | 광업 |
| C | 제조업 |
| D | 전기, 가스, 증기 및 공기 조절 공급업 |
| E | 수도, 하수 및 폐기물 처리, 원료 재생업 |
| F | 건설업 |
| G | 도매 및 소매업 |
| H | 운수 및 창고업 |
| I | 숙박 및 음식점업 |
| J | 정보통신업 |
| K | 금융 및 보험업 |
| L | 부동산업 |
| M | 전문, 과학 및 기술 서비스업 |
| N | 사업시설 관리, 사업 지원 및 임대 서비스업 |
| O | 공공 행정, 국방 및 사회보장 행정 |
| P | 교육 서비스업 |
| Q | 보건업 및 사회복지 서비스업 |
| R | 예술, 스포츠 및 여가관련 서비스업 |
| S | 협회 및 단체, 수리 및 기타 개인 서비스업 |
| T | 가구 내 고용활동 및 달리 분류되지 않은 자가 소비 생산활동 |
| U | 국제 및 외국기관 |
| Z | 기타 |

### Step 3: 첫 번째 현장 생성

**목표**: 바로 사용 가능한 상태 만들기

**화면 예시**:
```
┌─────────────────────────────────────────┐
│  🏗️ 첫 번째 현장을 등록해주세요          │
├─────────────────────────────────────────┤
│                                         │
│  현장 이름 *    [대전 공장        ]      │
│  현장 주소 *    [대전시 유성구... ] 🔍   │
│                                         │
│            [ 현장 생성하기 ]              │
└─────────────────────────────────────────┘
```

생성 버튼 클릭 후 → **팝업 1: 퇴근 정책 질문**

```
┌─────────────────────────────────────────┐
│  "대전 공장은 어떻게 퇴근 처리하나요?"    │
├─────────────────────────────────────────┤
│                                         │
│  ○ 8시간 후 자동 퇴근 (AUTO_8H)          │
│    출근 시간 기준 8시간 경과 시           │
│    자동으로 퇴근 처리됩니다.              │
│                                         │
│  ○ 모바일 앱으로 직접 퇴근 (MANUAL)       │
│    근로자가 앱에서 직접 퇴근 버튼을       │
│    눌러야 퇴근 처리됩니다.               │
│                                         │
│            [ 다음 ]                      │
└─────────────────────────────────────────┘
```

→ **팝업 2: 현장 관리자 안내**

```
┌─────────────────────────────────────────┐
│  ✓ 현장이 생성되었습니다!                │
├─────────────────────────────────────────┤
│                                         │
│  🏗️ 대전 공장                            │
│                                         │
│  현장 관리자는 홍길동 님입니다.           │
│                                         │
│  ⓘ 구성원을 추가하여 관리자를             │
│    변경할 수 있습니다.                   │
│                                         │
│            [ 확인 ]                      │
└─────────────────────────────────────────┘
```

### Step 4: 비밀번호 설정 (관리자 전용)

**목표**: 로그인 보안 설정

| 입력 항목 | 필수 | 비고 |
|----------|:----:|------|
| 비밀번호 | ✓ | 8자 이상, 영문+숫자 |
| 비밀번호 확인 | ✓ | |
| 이메일 | - | 알림 수신용 (선택) |

**화면 예시**:
```
┌─────────────────────────────────────────┐
│  비밀번호를 설정해주세요                  │
├─────────────────────────────────────────┤
│                                         │
│  휴대폰 번호    010-1234-5678 ✓ 인증완료 │
│                                         │
│  비밀번호 *     [••••••••        ]      │
│  비밀번호 확인 * [••••••••        ]      │
│                                         │
│  ⓘ 8자 이상, 영문과 숫자 포함            │
│                                         │
│  ─────── 선택 입력 ───────               │
│                                         │
│  이메일         [admin@company.com]     │
│  ⓘ 알림 및 비밀번호 재설정에 사용됩니다   │
│                                         │
│            [ 가입 완료 ]                 │
└─────────────────────────────────────────┘
```

> **로그인 ID는 휴대폰 번호**입니다. 이메일은 알림 수신 및 비밀번호 재설정용으로만 사용됩니다.

### Step 5: 초기 설정 진행 (로딩 UX)

**목표**: 기다림을 즐거운 경험으로

```
┌─────────────────────────────────────────┐
│                                         │
│     ████████████░░░░░░  60%             │
│                                         │
│     🏗️ 대전 공장 환경을 구성 중입니다...   │
│                                         │
│     ✓ 회사 정보 저장 완료                 │
│     ✓ 현장 생성 완료                     │
│     ◎ 관리자 권한 설정 중...              │
│     ○ 대시보드 준비 중                    │
│                                         │
└─────────────────────────────────────────┘
```

**실제 처리 내용**:
- companies 테이블에 회사 생성
- sites 테이블에 현장 생성
- users 테이블에 본인을 SUPER_ADMIN으로 등록
- 기본 설정값 적용

### Step 6: 가입 완료 & 다음 액션 유도

```
┌─────────────────────────────────────────┐
│                                         │
│     🎉 통패스 시작 준비 완료!             │
│                                         │
│     다음 중 하나를 선택해주세요:           │
│                                         │
│     [ 👷 근로자 초대하기 ]                │
│     [ 👔 관리자 추가하기 ]                │
│     [ 📊 대시보드 둘러보기 ]              │
│                                         │
└─────────────────────────────────────────┘
```

---

## 3. 관리자 초대 가입 (SITE_ADMIN / TEAM_ADMIN)

기존 관리자가 다른 관리자를 초대하는 플로우입니다.

### 3.1 초대하는 쪽 (기존 관리자)

**설정 > 관리자 관리**에서:

```
┌─────────────────────────────────────────┐
│  관리자 초대                             │
├─────────────────────────────────────────┤
│                                         │
│  이름 *      [김현장           ]         │
│  연락처 *    [010-1234-5678    ]         │
│  역할 *      [현장 관리자 ▼     ]         │
│  현장 *      [대전 공장 ▼       ]         │
│                                         │
│     [ 초대 문자 발송 ]                    │
└─────────────────────────────────────────┘
```

### 3.2 초대받는 쪽 (새 관리자)

**SMS 수신**:
```
[통패스] 김사장님이 '대전 공장' 관리자로 
초대했습니다.
👉 https://tongpass.com/invite/abc123
```

**링크 클릭 후 간소화된 가입**:

| 단계 | 화면 | 입력 항목 |
|:----:|------|----------|
| 1 | 본인 확인 | 휴대폰 인증 (초대받은 번호로) |
| 2 | 비밀번호 설정 | 비밀번호 + 이메일(선택) |
| 3 | 완료 | → 바로 대시보드 진입 |

**핵심**: 회사/현장 정보는 이미 세팅됨. 본인 인증 + 비밀번호 설정만 하면 끝.

---

## 4. 근로자 초대 가입 (WORKER / TEAM_ADMIN)

가장 간단해야 하는 플로우입니다.

### 4.1 초대하는 쪽 (관리자)

**근로자 관리 > 근로자 추가**에서:

#### 입력 필드

| 항목 | 필수 | 타입 | 비고 |
|------|:----:|------|------|
| 소속 팀 (업체) | ✓ | 드롭다운 | 등록된 팀 목록에서 선택 |
| 이름 | ✓ | 텍스트 | 실명 입력 |
| 휴대폰 번호 | ✓ | 전화번호 | 동의 링크가 발송됨 |
| 생년월일 | ✓ | 숫자 8자리 | 예: 19800101, 만 65세 이상 자동 판별 |
| 직책/직종 | ✓ | 텍스트+드롭다운 | 선택 또는 직접 입력 가능 |
| 시스템 권한 | - | 라디오 | 일반 근로자 / 팀 관리자(QR 리더) |
| 국적 | - | 드롭다운 | 기본값: 대한민국 |
| 성별 | - | 버튼 | 남성 / 여성, 기본값: 남성 |

#### 직책/직종 옵션

| 옵션 |
|------|
| 공사기사 |
| 전기기사 |
| 미장기사 |
| 설비기사 |
| 안전관리자 |
| 일반근로자 |
| 기타 (직접 입력) |

#### 국적 옵션

| 옵션 | 비고 |
|------|------|
| 대한민국 | 기본값 |
| 중국 | |
| 베트남 | |
| 네팔 | |
| 미얀마 | |
| 캄보디아 | |
| 태국 | |
| 인도네시아 | |
| 우즈베키스탄 | |
| 기타 | |

#### 시스템 권한 옵션

| 권한 | 코드 | 설명 |
|------|------|------|
| 일반 근로자 | `WORKER` | QR 코드 생성, 본인 출퇴근 확인 |
| 팀 관리자 | `TEAM_ADMIN` | QR 리더 - 팀원 출퇴근 스캔 가능 |

#### 화면 예시

```
┌─────────────────────────────────────────┐
│  근로자 추가                             │
├─────────────────────────────────────────┤
│                                         │
│  소속 팀 *     [(주)정이앤지 ▼    ]       │
│  이름 *        [박근로           ]       │
│  휴대폰 번호 * [010-9876-5432    ]       │
│  생년월일 *    [19650315         ]       │
│               ⓘ 만 59세 (고령자 아님)    │
│  직책/직종 *   [설비기사 ▼       ]       │
│                                         │
│  ─────── 선택 입력 ───────               │
│                                         │
│  시스템 권한   ● 일반 근로자              │
│               ○ 팀 관리자 (QR 리더)      │
│  국적         [대한민국 ▼       ]        │
│  성별         [남성] [여성]              │
│                                         │
│     [ 저장만 하기 ]  [ 초대 문자 발송 ]    │
└─────────────────────────────────────────┘
```

| 버튼 | 용도 |
|------|------|
| **저장만 하기** | 관리자가 대신 QR 발급 (현장에서 즉시 사용) |
| **초대 문자 발송** | 근로자가 직접 앱 설치하도록 안내 |

### 4.2 초대받는 쪽 (근로자)

**알림톡 수신**:
```
[통패스] 대전 공장에서 근무를 시작합니다!
📱 앱 설치 후 바로 출퇴근 QR을 받으세요.
👉 https://tongpass.com/worker/xyz789
```

**앱 설치 후 플로우** (3단계, 30초 이내 완료):

**Step 1: 본인 확인**
```
┌─────────────────────────────────────────┐
│  본인 확인                               │
├─────────────────────────────────────────┤
│                                         │
│  초대받은 휴대폰 번호로 인증해주세요        │
│                                         │
│  [010-9876-5432] (자동 입력)             │
│                                         │
│  인증번호: [      ]                      │
│                                         │
│           [ 확인 ]                       │
└─────────────────────────────────────────┘
```

**Step 2: 정보 확인 & 약관 동의**
```
┌─────────────────────────────────────────┐
│  정보 확인                               │
├─────────────────────────────────────────┤
│                                         │
│  이름: 박근로                            │
│  현장: 대전 공장                          │
│  소속: (주)정이앤지                       │
│  직종: 설비기사                          │
│                                         │
│  ☑️ 이용약관 동의 (필수)                  │
│  ☑️ 개인정보 처리방침 동의 (필수)          │
│                                         │
│           [ 시작하기 ]                   │
└─────────────────────────────────────────┘
```

**Step 3: 완료 → QR 즉시 표시**
```
┌─────────────────────────────────────────┐
│  🎉 환영합니다!                          │
│                                         │
│  ┌─────────────────────┐                │
│  │                     │                │
│  │    [QR 코드]        │                │
│  │                     │                │
│  └─────────────────────┘                │
│                                         │
│  이 QR을 관리자에게 보여주세요             │
│  ⏱️ 28초 후 갱신                         │
└─────────────────────────────────────────┘
```

**핵심**: 
- 이메일/비밀번호 없음
- 휴대폰 인증만으로 완료
- 30초 이내에 QR 사용 가능

---

## 5. 초대 코드 시스템

대량 등록이나 현장 직접 가입을 위한 보조 수단입니다.

### 5.1 초대 코드 유형

| 유형 | 형식 | 용도 | 유효기간 |
|------|------|------|---------|
| 현장 초대 코드 | `SITE-ABC123` | 특정 현장에 가입 | 7일 (설정 가능) |
| 팀 초대 코드 | `TEAM-XYZ789` | 특정 팀에 가입 | 7일 |
| 일회용 링크 | URL | 개인 초대 | 24시간 |

### 5.2 관리자가 초대 코드 생성

**설정 > 현장 설정**에서:

```
┌─────────────────────────────────────────┐
│  대전 공장 초대 코드                      │
├─────────────────────────────────────────┤
│                                         │
│  현재 코드: SITE-ABC123                  │
│  유효기간: 2025-01-10까지                 │
│  사용 횟수: 제한 없음                     │
│                                         │
│  [ 새 코드 생성 ]  [ 코드 공유 ]          │
└─────────────────────────────────────────┘
```

### 5.3 근로자가 초대 코드로 가입

앱 첫 화면에서:

```
┌─────────────────────────────────────────┐
│                                         │
│  초대 코드가 있으신가요?                  │
│                                         │
│  [SITE-ABC123    ]                      │
│                                         │
│           [ 확인 ]                       │
│                                         │
│  ─────── 또는 ───────                   │
│                                         │
│  [ 초대 링크로 가입하기 ]                 │
│                                         │
└─────────────────────────────────────────┘
```

---

## 6. 퇴근 처리 방식

### 6.1 퇴근 정책 비교

| 정책 | 코드 | 설명 | 적합한 현장 |
|------|------|------|------------|
| **자동 퇴근** | `AUTO_8H` | 출근 시간 기준 8시간 후 자동 퇴근 | 정규 근무 현장 |
| **직접 퇴근** | `MANUAL` | 근로자가 앱에서 퇴근 버튼 클릭 | 유동적 근무 현장 |

### 6.2 근로자 앱 퇴근 플로우 (MANUAL 정책)

**홈 화면에서 퇴근 버튼 표시**:
```
┌─────────────────────────────────────────┐
│  대전 공장                               │
│  박근로님                                │
├─────────────────────────────────────────┤
│                                         │
│  ✓ 출근 완료                             │
│  08:30 출근                              │
│                                         │
│  ┌─────────────────────┐                │
│  │                     │                │
│  │   [ 퇴근하기 ]       │                │
│  │                     │                │
│  └─────────────────────┘                │
│                                         │
│  근무 중: 8시간 32분                      │
│                                         │
└─────────────────────────────────────────┘
```

**퇴근 버튼 클릭 시 확인**:
```
┌─────────────────────────────────────────┐
│  퇴근 확인                               │
├─────────────────────────────────────────┤
│                                         │
│  현재 시간: 17:02                        │
│  총 근무 시간: 8시간 32분                 │
│                                         │
│  퇴근 처리하시겠습니까?                   │
│                                         │
│     [ 취소 ]     [ 퇴근하기 ]             │
└─────────────────────────────────────────┘
```

### 6.3 자동 퇴근 플로우 (AUTO_8H 정책)

- 출근 시간 기준 8시간 경과 시 시스템이 자동 퇴근 처리
- `is_auto_out = true`로 기록
- 근로자 앱에 푸시 알림: "8시간 근무 완료로 자동 퇴근 처리되었습니다."

---

## 7. 로그인 방식

### 7.1 역할별 로그인 방식

| 역할 | 로그인 방식 | 이유 |
|------|------------|------|
| **관리자** (SUPER/SITE/TEAM) | 휴대폰 번호 + 비밀번호 | PC에서 자주 접속, 보안 강화 필요 |
| **근로자** (WORKER) | 휴대폰 번호 + SMS 인증 | 비밀번호 기억 부담 없음, 간편 |

### 7.2 관리자 로그인 화면

```
┌─────────────────────────────────────────┐
│  관리자 로그인                           │
├─────────────────────────────────────────┤
│                                         │
│  휴대폰 번호  [010-1234-5678   ]         │
│  비밀번호    [••••••••        ]         │
│                                         │
│           [ 로그인 ]                     │
│                                         │
│  비밀번호를 잊으셨나요?                   │
│  → SMS 또는 이메일로 재설정              │
└─────────────────────────────────────────┘
```

### 7.3 근로자 로그인 화면 (앱)

```
┌─────────────────────────────────────────┐
│  로그인                                  │
├─────────────────────────────────────────┤
│                                         │
│  휴대폰 번호  [010-9876-5432   ] [인증]  │
│  인증번호    [      ]                   │
│                                         │
│           [ 로그인 ]                     │
│                                         │
│  ⓘ 비밀번호 없이 SMS 인증만으로           │
│    간편하게 로그인할 수 있습니다.          │
└─────────────────────────────────────────┘
```

---

## 8. 재접속 시나리오

### 8.1 관리자 재접속

| 상황 | 처리 |
|------|------|
| 일반 로그인 | 휴대폰 번호 + 비밀번호 |
| 비밀번호 분실 | SMS 또는 이메일(등록 시)로 재설정 링크 발송 |
| 장기 미접속 | 동일 (계정 유지) |

**비밀번호 재설정 플로우**:
```
┌─────────────────────────────────────────┐
│  비밀번호 재설정                         │
├─────────────────────────────────────────┤
│                                         │
│  휴대폰 번호  [010-1234-5678   ] [인증]  │
│                                         │
│  인증번호    [      ]                   │
│                                         │
│           [ 확인 ]                       │
│                                         │
│  또는 등록된 이메일로 재설정 링크 받기     │
│  [ 이메일로 받기 ]                       │
└─────────────────────────────────────────┘
```

### 8.2 근로자 재접속

| 상황 | 처리 |
|------|------|
| 앱 재설치 | 휴대폰 번호 + SMS 인증으로 복구 |
| 휴대폰 번호 변경 | 관리자에게 연락 → 번호 업데이트 후 재인증 |
| 다른 기기에서 접속 | 휴대폰 번호 + SMS 인증 (기존 기기 자동 로그아웃) |

**근로자 재접속 화면**:
```
┌─────────────────────────────────────────┐
│  다시 오셨군요!                          │
├─────────────────────────────────────────┤
│                                         │
│  등록된 휴대폰 번호로 인증해주세요         │
│                                         │
│  휴대폰 번호  [010-9876-5432   ] [인증]  │
│  인증번호    [      ]                   │
│                                         │
│           [ 확인 ]                       │
│                                         │
│  번호가 변경되셨나요?                     │
│  현장 관리자에게 문의해주세요.             │
│                                         │
└─────────────────────────────────────────┘
```

---

## 9. 전체 플로우 다이어그램

```
                    ┌─────────────────┐
                    │   통패스 진입    │
                    └────────┬────────┘
                             │
              ┌──────────────┼──────────────┐
              │              │              │
              ▼              ▼              ▼
       ┌──────────┐   ┌──────────┐   ┌──────────┐
       │ 웹 직접   │   │ 초대 링크 │   │ 초대 코드 │
       │   가입    │   │   클릭   │   │   입력   │
       └────┬─────┘   └────┬─────┘   └────┬─────┘
            │              │              │
            ▼              └──────┬───────┘
     ┌──────────────┐             │
     │ 개인정보 입력 │             ▼
     │ + 휴대폰 인증 │      ┌──────────────┐
     └──────┬───────┘      │  휴대폰 인증  │
            │              │ (번호 확인용) │
            ▼              └──────┬───────┘
     ┌──────────────┐             │
     │  회사 정보   │             │
     │ (회사명, 대표,│             │
     │  주소, 사업자)│             │
     └──────┬───────┘             │
            │                     │
            ▼                     │
     ┌──────────────┐             │
     │  현장 생성   │             │
     │ + 퇴근 정책  │             │
     └──────┬───────┘             │
            │                     │
            ▼                     ▼
     ┌──────────────┐      ┌──────────────┐
     │  비밀번호    │      │  약관 동의   │
     │    설정     │      │  (근로자는   │
     │ (관리자만)  │      │   이것만!)   │
     └──────┬───────┘      └──────┬───────┘
            │                     │
            └──────────┬──────────┘
                       │
                       ▼
              ┌──────────────┐
              │   가입 완료   │
              │  역할별 분기  │
              └──────┬───────┘
                     │
        ┌────────────┼────────────┐
        │            │            │
        ▼            ▼            ▼
   ┌─────────┐ ┌─────────┐ ┌─────────┐
   │관리자 웹│ │ 팀장 웹 │ │근로자 앱│
   │대시보드 │ │(제한된  │ │ QR 표시 │
   │        │ │ 기능)   │ │+ 퇴근   │
   └─────────┘ └─────────┘ └─────────┘
```

### 로그인 방식 요약

```
┌─────────────────────────────────────────────────────────────────┐
│                        로그인 방식                               │
├─────────────────────────────┬───────────────────────────────────┤
│      관리자 (웹)              │      근로자 (앱)                   │
│                             │                                   │
│  휴대폰 번호 + 비밀번호       │  휴대폰 번호 + SMS 인증            │
│  (보안 강화)                 │  (비밀번호 없음, 간편)             │
└─────────────────────────────┴───────────────────────────────────┘
```

---

## 10. 가입 후 추가 설정 (설정 메뉴에서)

최초 가입 시 필수 정보만 받고, 나머지는 **설정 > 회사 정보**에서 입력하도록 유도합니다.

### 10.1 회사 기본 정보 (나중에 입력)

| 항목 | 필수 | 비고 |
|------|:----:|------|
| 대표 업종코드 | - | 미입력 시 "기타"로 표시 |
| 직원 수 | - | 미입력 시 "미설정"으로 표시 |
| 사업자 등록증 | - | PDF, JPG, PNG (5MB 이하) |

### 10.2 담당자 정보 (나중에 입력)

| 구분 | 항목 |
|------|------|
| 전산 관리자 | 이름, 연락처, 이메일 |
| 결제 담당자 | 이름, 연락처, 이메일 |

---

## 11. 예외 상황 처리

### 11.1 가입 실패 케이스

| 상황 | 메시지 | 처리 |
|------|--------|------|
| 이미 가입된 휴대폰 번호 | "이미 가입된 번호입니다" | 로그인 페이지로 유도 |
| 만료된 초대 링크 | "초대 링크가 만료되었습니다" | 관리자에게 재초대 요청 안내 |
| 잘못된 초대 코드 | "유효하지 않은 코드입니다" | 코드 재확인 안내 |
| SMS 인증 실패 3회 | "잠시 후 다시 시도해주세요" | 5분 후 재시도 가능 |
| 이미 사용 중인 이메일 | "이미 사용 중인 이메일입니다" | 다른 이메일 입력 유도 (선택항목) |

### 11.2 중복 가입 방지

| 기준 | 처리 |
|------|------|
| 휴대폰 번호 | 전체 시스템에서 유일해야 함 (로그인 ID) |
| 이메일 | 전체 시스템에서 유일해야 함 (입력 시) |
| 사업자등록번호 | 전체 시스템에서 유일해야 함 |

---

## 12. 관련 문서

- [프로젝트 개요](./PROJECT-OVERVIEW.md)
- [기술 아키텍처](./ARCHITECTURE.md)
- [데이터베이스 설계](./DATABASE.md)
- [개발 가이드](./DEVELOPMENT.md)
