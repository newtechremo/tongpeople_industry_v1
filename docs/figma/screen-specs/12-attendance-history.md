# M04 출퇴근 기록 (Attendance History)

> **화면 ID**: M04
> **파일명**: `12-attendance-history.md`
> **상태**: Phase 1 MVP

---

## 1. 기본 정보

| 항목 | 내용 |
|------|------|
| **화면명** | 출퇴근 기록 |
| **영문명** | Attendance History |
| **접근 조건** | 로그인 상태 (ACTIVE) |
| **하단 탭** | 출퇴근 (활성) |

---

## 2. 레이아웃 구조

```
┌─────────────────────────────────────┐
│  ←       출퇴근 기록                 │  ← 헤더
├─────────────────────────────────────┤
│                                     │
│    ◀   2026년 1월   ▶               │  ← 월 선택
│                                     │
│  ┌─────────────────────────────┐   │
│  │  이번 달 근무 요약            │   │
│  │  ─────────────────────────── │   │
│  │  출근일수    12일             │   │
│  │  총 근무시간  96시간           │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │  1월 13일 (월) ─────── 오늘   │   │
│  │  출근 09:00  퇴근 --:--      │   │
│  │  근무중 · 3시간 24분          │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │  1월 12일 (일)               │   │
│  │  출근 08:30  퇴근 17:30      │   │
│  │  9시간 00분                  │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │  1월 11일 (토)               │   │
│  │  출근 09:00  퇴근 18:00      │   │
│  │  9시간 00분 · 자동퇴근        │   │
│  └─────────────────────────────┘   │
│                                     │
│  ... (스크롤)                       │
│                                     │
├─────────────────────────────────────┤
│  홈    출퇴근    [QR]     MY       │
└─────────────────────────────────────┘
```

---

## 3. UI 컴포넌트

### 3.1 헤더

```
┌─────────────────────────────────────┐
│  ←       출퇴근 기록                 │
└─────────────────────────────────────┘

타입: 타이틀 헤더
뒤로가기: 홈으로 (또는 탭바로 처리)
```

### 3.2 월 선택기

```
      ◀   2026년 1월   ▶

좌우 화살표: ChevronLeft, ChevronRight
중앙 텍스트: 18px, Bold, Slate 800
터치 영역: 화살표 각각 48x48
```

### 3.3 월간 요약 카드

```
┌─────────────────────────────────────┐
│  이번 달 근무 요약                   │
│  ───────────────────────────────── │
│  출근일수     12일                  │
│  총 근무시간   96시간                │
└─────────────────────────────────────┘

배경: Orange 50
테두리: Orange 200
제목: 14px, Bold, Orange 700
라벨: 14px, Regular, Slate 500
값: 16px, Bold, Slate 800
```

### 3.4 일별 기록 카드

```
┌─────────────────────────────────────┐
│  1월 13일 (월) ─────────────── 오늘  │
│  출근 09:00   퇴근 --:--            │
│  근무중 · 3시간 24분                 │
└─────────────────────────────────────┘

날짜: 14px, SemiBold, Slate 800
"오늘" 뱃지: Orange 500, 12px, Bold
시간: 14px, Regular, Slate 600
상태: 14px, Medium (색상 다름)
```

### 3.5 상태별 스타일

| 상태 | 텍스트 | 색상 |
|------|--------|------|
| 근무중 | "근무중 · {시간}" | Orange 600 |
| 퇴근완료 | "{근무시간}" | Slate 800 |
| 자동퇴근 | "{시간} · 자동퇴근" | Slate 500 |
| 미출근 | "미출근" | Slate 400 |

---

## 4. 상태별 UI

### 4.1 데이터 있음

```
- 요약 카드 표시
- 일별 기록 리스트 (최신순)
- 스크롤 가능
```

### 4.2 데이터 없음

```
┌─────────────────────────────────────┐
│                                     │
│             📋                      │
│                                     │
│   이번 달 출퇴근 기록이 없습니다      │
│                                     │
└─────────────────────────────────────┘
```

### 4.3 로딩

```
- 스켈레톤 UI (카드 형태)
- 요약 카드 스켈레톤
- 일별 카드 스켈레톤 3-4개
```

---

## 5. 인터랙션

### 5.1 월 변경

```
좌측 화살표 (◀):
  - 이전 달로 이동
  - 데이터 새로 로드
  - 로딩 표시

우측 화살표 (▶):
  - 다음 달로 이동
  - 현재 달 이후는 비활성
```

### 5.2 일별 카드 터치

```
- 상세 정보 팝업 (선택적)
- 또는 터치 효과만 (인터랙션 없음)
```

### 5.3 스크롤

```
- FlatList 사용
- 무한 스크롤 없음 (월 단위)
- Pull to Refresh (선택적)
```

---

## 6. API 연동

### Request

```typescript
GET /functions/v1/attendance-history?year=2026&month=1
```

### Response

```typescript
{
  "summary": {
    "workDays": 12,
    "totalMinutes": 5760  // 96시간
  },
  "records": [
    {
      "id": "uuid",
      "workDate": "2026-01-13",
      "checkInTime": "09:00",
      "checkOutTime": null,
      "status": "WORK_ON",
      "totalMinutes": 204,
      "isAutoOut": false
    },
    {
      "id": "uuid",
      "workDate": "2026-01-12",
      "checkInTime": "08:30",
      "checkOutTime": "17:30",
      "status": "WORK_DONE",
      "totalMinutes": 540,
      "isAutoOut": false
    }
    // ...
  ]
}
```

---

## 7. 데이터 모델

```typescript
interface AttendanceSummary {
  workDays: number;
  totalMinutes: number;
}

interface AttendanceRecord {
  id: string;
  workDate: string;
  checkInTime: string;
  checkOutTime?: string;
  status: 'WORK_ON' | 'WORK_DONE';
  totalMinutes: number;
  isAutoOut: boolean;
}
```

---

## 8. 디자인 토큰

```tsx
// 요약 카드
const summaryCard = {
  background: 'bg-orange-50',
  border: 'border-orange-200',
  title: 'text-orange-700',
};

// 상태 색상
const statusColors = {
  WORK_ON: 'text-orange-600',
  WORK_DONE: 'text-slate-800',
  AUTO_OUT: 'text-slate-500',
  NO_RECORD: 'text-slate-400',
};

// 오늘 뱃지
const todayBadge = {
  background: 'bg-orange-500',
  text: 'text-white',
  fontSize: 12,
  paddingX: 8,
  paddingY: 2,
  borderRadius: 4,
};
```

---

## 9. Figma 프레임 목록

| 프레임명 | 설명 |
|----------|------|
| `M04 출퇴근기록 / Default` | 기본 상태 |
| `M04 출퇴근기록 / Empty` | 기록 없음 |
| `M04 출퇴근기록 / Loading` | 로딩 상태 |
| `M04 출퇴근기록 / Scrolled` | 스크롤된 상태 |
