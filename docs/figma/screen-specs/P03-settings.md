# P03 설정 (Settings)

> **화면 ID**: P03
> **파일명**: `P03-settings.md`
> **상태**: Phase 1 MVP

---

## 1. 기본 정보

| 항목 | 내용 |
|------|------|
| **화면명** | 설정 |
| **영문명** | Settings |
| **접근 조건** | 로그인 상태 (ACTIVE) |
| **이전 화면** | P01 마이페이지 |

---

## 2. 레이아웃 구조

```
┌─────────────────────────────────────┐
│  ←       설정                       │  ← 헤더
├─────────────────────────────────────┤
│                                     │
│  알림 설정                           │  ← 섹션 제목
│  ┌─────────────────────────────┐   │
│  │  푸시 알림                [◯] │   │  ← 토글
│  ├─────────────────────────────┤   │
│  │  출퇴근 알림              [◯] │   │
│  ├─────────────────────────────┤   │
│  │  공지사항 알림            [◯] │   │
│  └─────────────────────────────┘   │
│                                     │
│  앱 정보                            │  ← 섹션 제목
│  ┌─────────────────────────────┐   │
│  │  앱 버전           1.0.0     │   │
│  ├─────────────────────────────┤   │
│  │  오픈소스 라이선스       →   │   │
│  ├─────────────────────────────┤   │
│  │  개인정보처리방침        →   │   │
│  ├─────────────────────────────┤   │
│  │  이용약관               →   │   │
│  └─────────────────────────────┘   │
│                                     │
│  계정                               │  ← 섹션 제목
│  ┌─────────────────────────────┐   │
│  │  🔴 로그아웃                  │   │
│  ├─────────────────────────────┤   │
│  │  🔴 회원 탈퇴                 │   │
│  └─────────────────────────────┘   │
│                                     │
└─────────────────────────────────────┘
```

---

## 3. UI 컴포넌트

### 3.1 헤더

```
┌─────────────────────────────────────┐
│  ←       설정                       │
└─────────────────────────────────────┘

타입: 타이틀 헤더
뒤로가기: P01 마이페이지
제목: "설정", 18px, Bold, Slate 800
```

### 3.2 섹션 제목

```
   알림 설정

폰트: 14px, SemiBold
색상: Slate 500
패딩: 좌 16px, 상 24px, 하 8px
```

### 3.3 알림 설정 카드

```
┌─────────────────────────────────────┐
│  푸시 알림                     [◯]  │
├─────────────────────────────────────┤
│  출퇴근 알림                   [◯]  │
├─────────────────────────────────────┤
│  공지사항 알림                 [◯]  │
└─────────────────────────────────────┘

배경: White
테두리: Gray 200
모서리: 12px
행 높이: 56px
텍스트: 16px, Regular, Slate 800
토글: iOS 스타일 스위치
토글 활성: Orange 500
토글 비활성: Gray 300
구분선: Gray 100
```

### 3.4 토글 스위치 상세

```
     ┌──────────┐
     │    ◯    │  ← OFF 상태
     └──────────┘
     배경: Gray 300

     ┌──────────┐
     │    ◯    │  ← ON 상태
     └──────────┘
     배경: Orange 500

크기: 51x31
원 지름: 27
애니메이션: 200ms ease-in-out
```

### 3.5 앱 정보 카드

```
┌─────────────────────────────────────┐
│  앱 버전                    1.0.0   │  ← 값 표시
├─────────────────────────────────────┤
│  오픈소스 라이선스              →    │  ← 네비게이션
├─────────────────────────────────────┤
│  개인정보처리방침               →    │
├─────────────────────────────────────┤
│  이용약관                      →    │
└─────────────────────────────────────┘

배경: White
테두리: Gray 200
모서리: 12px
행 높이: 56px
텍스트: 16px, Regular, Slate 800
값: 14px, Regular, Slate 400
화살표: ChevronRight, 16px, Slate 400
```

### 3.6 계정 카드

```
┌─────────────────────────────────────┐
│  로그아웃                           │
├─────────────────────────────────────┤
│  회원 탈퇴                          │
└─────────────────────────────────────┘

배경: White
테두리: Gray 200
모서리: 12px
행 높이: 56px
로그아웃: Red 500, 16px, Medium
회원 탈퇴: Red 500, 16px, Medium
구분선: Gray 100
```

---

## 4. 알림 설정 상세

| 알림 유형 | 기본값 | 설명 |
|----------|--------|------|
| 푸시 알림 | ON | 전체 푸시 알림 마스터 토글 |
| 출퇴근 알림 | ON | 출근/퇴근 완료 시 알림 |
| 공지사항 알림 | ON | 관리자 공지 시 알림 |

### 4.1 마스터 토글 동작

```
푸시 알림 OFF 시:
  - 하위 알림 모두 비활성화 (회색 처리)
  - 토글 터치 불가

푸시 알림 ON 시:
  - 하위 알림 개별 설정 가능
```

---

## 5. 상태별 UI

### 5.1 정상 상태

```
- 모든 설정 활성화
- 토글 조작 가능
```

### 5.2 푸시 알림 OFF

```
┌─────────────────────────────────────┐
│  푸시 알림                     [ ]  │  ← OFF
├─────────────────────────────────────┤
│  출퇴근 알림                   [ ]  │  ← 비활성 (회색)
├─────────────────────────────────────┤
│  공지사항 알림                 [ ]  │  ← 비활성 (회색)
└─────────────────────────────────────┘

비활성 텍스트: Slate 400
비활성 토글: Gray 200
터치 불가
```

### 5.3 로딩

```
- 토글 로딩 시 스피너 표시
- 변경 저장 중 토글 비활성
```

---

## 6. 인터랙션

### 6.1 토글 변경

```
1. 토글 터치
2. 애니메이션 전환
3. API 호출 (설정 저장)
4. 실패 시 원래 상태로 복원 + 토스트
```

### 6.2 앱 정보 메뉴 터치

```
오픈소스 라이선스:
  - 라이선스 목록 화면 또는 웹뷰

개인정보처리방침:
  - 웹뷰 또는 상세 화면

이용약관:
  - 웹뷰 또는 상세 화면
```

### 6.3 로그아웃

```
1. 터치 시 확인 팝업
2. [확인] 시:
   - 로컬 토큰 삭제
   - Supabase 세션 종료
   - A01 화면으로 이동
3. [취소] 시: 팝업 닫기
```

### 6.4 회원 탈퇴

```
1. 터치 시 경고 팝업
2. 입력 확인: "탈퇴" 입력 요구 (선택적)
3. [확인] 시:
   - API 호출: DELETE /worker-me
   - 성공: A01 화면으로 이동
   - 토스트: "회원 탈퇴가 완료되었습니다"
4. [취소] 시: 팝업 닫기
```

### 6.5 로그아웃 확인 팝업

```
┌─────────────────────────────────────┐
│                                     │
│         로그아웃 하시겠습니까?        │
│                                     │
│   로그아웃 후 다시 로그인해야         │
│   서비스를 이용할 수 있습니다.        │
│                                     │
│    [ 취소 ]       [ 확인 ]          │
│                                     │
└─────────────────────────────────────┘
```

### 6.6 회원 탈퇴 경고 팝업

```
┌─────────────────────────────────────┐
│                                     │
│            ⚠️ 회원 탈퇴              │
│                                     │
│   회원 탈퇴 시 모든 데이터가          │
│   삭제되며 복구할 수 없습니다.        │
│                                     │
│   정말 탈퇴하시겠습니까?             │
│                                     │
│    [ 취소 ]     [ 탈퇴하기 ]         │
│                                     │
└─────────────────────────────────────┘

경고 아이콘: AlertTriangle, Amber 500
탈퇴하기 버튼: Red 500 배경
```

---

## 7. API 연동

### 알림 설정 조회

```typescript
GET /functions/v1/notification-settings
```

### Response

```typescript
{
  "pushEnabled": true,
  "attendanceEnabled": true,
  "noticeEnabled": true
}
```

### 알림 설정 변경

```typescript
PATCH /functions/v1/notification-settings

{
  "pushEnabled": false
}
```

### 회원 탈퇴

```typescript
DELETE /functions/v1/worker-me
```

---

## 8. 데이터

```typescript
interface SettingsData {
  notifications: {
    pushEnabled: boolean;
    attendanceEnabled: boolean;
    noticeEnabled: boolean;
  };
  appInfo: {
    version: string;
    buildNumber: string;
  };
}
```

---

## 9. 디자인 토큰

```tsx
// 섹션 제목
const sectionTitle = {
  fontSize: 14,
  fontWeight: '600',
  color: '#64748B', // slate-500
  paddingLeft: 16,
  paddingTop: 24,
  paddingBottom: 8,
};

// 설정 카드
const settingsCard = {
  backgroundColor: 'white',
  borderRadius: 12,
  borderWidth: 1,
  borderColor: '#E5E7EB', // gray-200
  rowHeight: 56,
};

// 토글
const toggle = {
  width: 51,
  height: 31,
  thumbSize: 27,
  activeBackground: '#F97316', // orange-500
  inactiveBackground: '#D1D5DB', // gray-300
  disabledBackground: '#E5E7EB', // gray-200
};

// 위험 액션
const dangerAction = {
  textColor: '#EF4444', // red-500
  buttonBackground: '#EF4444',
};
```

---

## 10. 접근성

```
- 토글 상태 스크린 리더 지원
- 충분한 터치 영역 (56px 높이)
- 위험 액션 시각적 구분 (빨간색)
- 탈퇴 전 확인 단계
```

---

## 11. Figma 프레임 목록

| 프레임명 | 설명 |
|----------|------|
| `P03 설정 / Default` | 기본 상태 (모든 알림 ON) |
| `P03 설정 / PushOff` | 푸시 알림 OFF |
| `P03 설정 / LogoutPopup` | 로그아웃 확인 팝업 |
| `P03 설정 / WithdrawPopup` | 회원 탈퇴 경고 팝업 |
