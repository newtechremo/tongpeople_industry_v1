# P01 마이페이지 (My Page)

> **화면 ID**: P01
> **파일명**: `P01-mypage.md`
> **상태**: Phase 1 MVP

---

## 1. 기본 정보

| 항목 | 내용 |
|------|------|
| **화면명** | 마이페이지 |
| **영문명** | My Page |
| **접근 조건** | 로그인 상태 (ACTIVE) |
| **하단 탭** | MY (활성) |

---

## 2. 레이아웃 구조

```
┌─────────────────────────────────────┐
│  마이페이지                    [⚙]  │  ← 헤더
├─────────────────────────────────────┤
│                                     │
│  ┌─────────────────────────────┐   │
│  │  👤                         │   │
│  │                             │   │
│  │  홍길동                      │   │  ← 프로필 카드
│  │  (주)정이앤지 · 전기기사      │   │
│  │                             │   │
│  │     프로필 보기  →           │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │  이번 달 근무 현황            │   │
│  │  ─────────────────────────── │   │
│  │  출근일수     12일           │   │  ← 근무 통계 카드
│  │  총 근무시간   96시간         │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │  📋 출퇴근 기록          →   │   │
│  ├─────────────────────────────┤   │
│  │  📄 이용약관            →   │   │  ← 메뉴 리스트
│  ├─────────────────────────────┤   │
│  │  🔒 개인정보처리방침     →   │   │
│  ├─────────────────────────────┤   │
│  │  ℹ️ 앱 버전     1.0.0       │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │       로그아웃               │   │
│  └─────────────────────────────┘   │
│                                     │
├─────────────────────────────────────┤
│  홈    출퇴근    [QR]     MY       │
└─────────────────────────────────────┘
```

---

## 3. UI 컴포넌트

### 3.1 헤더

```
┌─────────────────────────────────────┐
│  마이페이지                    [⚙]  │
└─────────────────────────────────────┘

타입: 타이틀 헤더
제목: "마이페이지", 18px, Bold, Slate 800
우측 아이콘: Settings (Lucide), 24px, Slate 600
아이콘 터치 영역: 44x44
```

### 3.2 프로필 카드

```
┌─────────────────────────────────────┐
│                                     │
│   ┌────────┐                       │
│   │  👤    │    홍길동              │  ← 이름
│   │ (아바타)│    (주)정이앤지 · 전기기사 │  ← 소속/직책
│   └────────┘                       │
│                                     │
│              프로필 보기  →          │
│                                     │
└─────────────────────────────────────┘

배경: White
테두리: Gray 200
모서리: 16px
패딩: 20px

아바타 영역: 64x64, Gray 100 배경, rounded-full
아바타 아이콘: User, 32px, Slate 400
이름: 18px, Bold, Slate 800
소속: 14px, Regular, Slate 500
"프로필 보기": 14px, Medium, Orange 500
화살표: ChevronRight, 16px, Orange 500
```

### 3.3 근무 통계 카드

```
┌─────────────────────────────────────┐
│  이번 달 근무 현황                   │
│  ─────────────────────────────────  │
│                                     │
│  출근일수          12일             │
│  총 근무시간        96시간           │
│                                     │
└─────────────────────────────────────┘

배경: Orange 50
테두리: Orange 200
모서리: 16px
패딩: 20px

제목: 14px, Bold, Orange 700
구분선: Orange 200
라벨: 14px, Regular, Slate 500
값: 16px, Bold, Slate 800
행 간격: 12px
```

### 3.4 메뉴 리스트

```
┌─────────────────────────────────────┐
│  📋 출퇴근 기록                 →   │
├─────────────────────────────────────┤
│  📄 이용약관                   →   │
├─────────────────────────────────────┤
│  🔒 개인정보처리방침            →   │
├─────────────────────────────────────┤
│  ℹ️ 앱 버전              1.0.0     │
└─────────────────────────────────────┘

배경: White
테두리: Gray 200
모서리: 16px
행 높이: 56px
아이콘: 20px, Slate 500
텍스트: 16px, Regular, Slate 800
화살표: ChevronRight, 16px, Slate 400
버전 값: 14px, Regular, Slate 400
구분선: Gray 100 (내부)
```

### 3.5 메뉴 아이템 상세

| 메뉴 | 아이콘 | 동작 |
|------|--------|------|
| 출퇴근 기록 | ClipboardList | M04 화면으로 이동 |
| 이용약관 | FileText | 웹뷰 또는 상세 화면 |
| 개인정보처리방침 | Lock | 웹뷰 또는 상세 화면 |
| 앱 버전 | Info | 클릭 불가, 정보만 표시 |

### 3.6 로그아웃 버튼

```
┌─────────────────────────────────────┐
│            로그아웃                  │
└─────────────────────────────────────┘

타입: Text Button (테두리 없음)
배경: 투명
텍스트: Red 500, 16px, Medium
정렬: 중앙
높이: 48px
터치 시: Red 50 배경
```

---

## 4. 역할별 분기

### 4.1 WORKER (일반 근로자)

```
- 기본 메뉴만 표시
- QR 스캔 탭 비활성
```

### 4.2 TEAM_ADMIN (팀 관리자)

```
- 기본 메뉴 표시
- "팀원 관리" 메뉴 추가 (선택적)
- QR 스캔 탭 활성
```

### 4.3 SITE_ADMIN / SUPER_ADMIN

```
- 기본 메뉴 표시
- "관리자 웹" 바로가기 (선택적)
- QR 스캔 탭 활성
```

---

## 5. 상태별 UI

### 5.1 정상 상태

```
- 모든 정보 표시
- 메뉴 활성화
```

### 5.2 로딩 상태

```
- 프로필 카드: 스켈레톤
- 통계 카드: 스켈레톤
- 메뉴: 정상 표시 (정적 요소)
```

### 5.3 오프라인 상태

```
- 캐시된 프로필 정보 표시
- 통계: 마지막 동기화 데이터 + "오프라인" 뱃지
```

---

## 6. 인터랙션

### 6.1 프로필 카드 터치

```
1. 터치 시 ripple 효과
2. P02 (프로필 상세) 화면으로 이동
```

### 6.2 메뉴 아이템 터치

```
1. 터치 시 배경색 변경 (Gray 50)
2. 해당 화면으로 이동
```

### 6.3 로그아웃 버튼

```
1. 터치 시 확인 팝업 표시
2. [확인] 시:
   - 로컬 토큰 삭제
   - Supabase 세션 종료
   - A01 (회사 코드 입력) 화면으로 이동
3. [취소] 시: 팝업 닫기
```

### 6.4 로그아웃 확인 팝업

```
┌─────────────────────────────────────┐
│                                     │
│         로그아웃 하시겠습니까?        │
│                                     │
│   로그아웃 후 다시 로그인해야         │
│   서비스를 이용할 수 있습니다.        │
│                                     │
│    [ 취소 ]       [ 확인 ]          │
│                                     │
└─────────────────────────────────────┘
```

### 6.5 설정 아이콘 터치

```
1. 터치 시 P03 (설정) 화면으로 이동
```

---

## 7. API 연동

### 프로필 정보

```typescript
// 로그인 시 캐시된 데이터 사용
const profile = useUserStore((state) => state.profile);
```

### 근무 통계 Request

```typescript
GET /functions/v1/my-stats?year=2026&month=1
```

### Response

```typescript
{
  "workDays": 12,
  "totalMinutes": 5760  // 96시간
}
```

---

## 8. 데이터

```typescript
interface MyPageData {
  profile: {
    name: string;
    teamName: string;
    jobTitle: string;
    role: UserRole;
  };
  stats: {
    workDays: number;
    totalMinutes: number;
  };
  appVersion: string;
}
```

---

## 9. 디자인 토큰

```tsx
// 프로필 카드
const profileCard = {
  backgroundColor: 'white',
  borderRadius: 16,
  borderWidth: 1,
  borderColor: '#E5E7EB', // gray-200
  padding: 20,
};

// 아바타
const avatar = {
  size: 64,
  backgroundColor: '#F3F4F6', // gray-100
  iconSize: 32,
  iconColor: '#9CA3AF', // gray-400
};

// 통계 카드
const statsCard = {
  backgroundColor: '#FFF7ED', // orange-50
  borderColor: '#FED7AA', // orange-200
  titleColor: '#C2410C', // orange-700
};

// 메뉴 리스트
const menuList = {
  rowHeight: 56,
  iconSize: 20,
  arrowSize: 16,
  separatorColor: '#F3F4F6', // gray-100
};

// 로그아웃 버튼
const logoutButton = {
  textColor: '#EF4444', // red-500
  pressedBackground: '#FEF2F2', // red-50
};
```

---

## 10. Figma 프레임 목록

| 프레임명 | 설명 |
|----------|------|
| `P01 마이페이지 / Default` | 기본 상태 |
| `P01 마이페이지 / Loading` | 로딩 상태 |
| `P01 마이페이지 / LogoutPopup` | 로그아웃 확인 팝업 |
| `P01 마이페이지 / TeamAdmin` | 팀 관리자 추가 메뉴 |
