# A05 정보 입력 (Info Input)

> **화면 ID**: A05
> **파일명**: `A05-info-input.md`
> **상태**: Phase 1 MVP

---

## 1. 기본 정보

| 항목 | 내용 |
|------|------|
| **화면명** | 근로자 정보 입력 |
| **영문명** | Worker Info Input |
| **접근 조건** | SMS 인증 완료 (신규 회원) |
| **이전 화면** | A09 비밀번호 설정 |
| **다음 화면** | A06 약관 동의 |

---

## 2. 레이아웃 구조

```
┌─────────────────────────────────────┐
│  ←       정보 입력                  │  ← 헤더
├─────────────────────────────────────┤
│                                     │
│  ┌─ 선등록 배너 (조건부) ───────────┐ │
│  │ ✓ 관리자가 등록한 정보를 불러왔습니다 │ │
│  └─────────────────────────────────┘ │
│                                     │
│  이름 *                              │
│  ┌─────────────────────────────┐   │
│  │  홍길동                       │   │
│  └─────────────────────────────┘   │
│                                     │
│  생년월일 * (8자리)                  │
│  ┌─────────────────────────────┐   │
│  │  19850315                    │   │
│  └─────────────────────────────┘   │
│                                     │
│  휴대폰번호 (인증완료) ✓             │
│  ┌─────────────────────────────┐   │
│  │  010-1234-5678               │   │  ← 읽기 전용
│  └─────────────────────────────┘   │
│                                     │
│  이메일주소 (선택)                   │
│  ┌─────────────────────────────┐   │
│  │  hong@email.com              │   │
│  └─────────────────────────────┘   │
│                                     │
│  성별 *                             │
│  ┌─────────┐  ┌─────────┐        │
│  │ ● 남성  │  │ ○ 여성  │        │
│  └─────────┘  └─────────┘        │
│                                     │
│  국적 *                             │
│  ┌─────────────────────────────┐   │
│  │  대한민국                  ▼  │   │
│  └─────────────────────────────┘   │
│                                     │
│  소속 팀 *                          │
│  ┌─────────────────────────────┐   │
│  │  (주)정이앤지              ▼  │   │
│  └─────────────────────────────┘   │
│                                     │
│  직책/직종 *                        │
│  ┌─────────────────────────────┐   │
│  │  전기기사                  ▼  │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │           다음               │   │
│  └─────────────────────────────┘   │
│                                     │
└─────────────────────────────────────┘
```

---

## 3. 입력 필드 상세

### 3.1 필드 목록

| 필드 | 필수 | 타입 | 검증 규칙 |
|------|:----:|------|----------|
| **이름** | O | Text | 2~20자, 한글/영문 |
| **생년월일** | O | Number (8) | YYYYMMDD, 유효 날짜 |
| **휴대폰번호** | O | Display | 수정 불가 (인증 완료) |
| **이메일주소** | X | Email | 형식 검증 (선택) |
| **성별** | O | Radio | 남성/여성 |
| **국적** | O | Dropdown | 국가 목록 |
| **소속 팀** | O | Dropdown | 현장 팀 목록 |
| **직책/직종** | O | Dropdown+Text | 선택 또는 직접 입력 |

### 3.2 이름 필드

```
┌─────────────────────────────────────┐
│  이름 *                              │
│  ┌─────────────────────────────┐   │
│  │  홍길동                       │   │
│  └─────────────────────────────┘   │
│  ⚠ 실명을 정확히 입력해주세요        │  ← 에러 시
└─────────────────────────────────────┘
```

### 3.3 생년월일 필드

```
┌─────────────────────────────────────┐
│  생년월일 * (8자리)                  │
│  ┌─────────────────────────────┐   │
│  │  19850315                    │   │
│  └─────────────────────────────┘   │
│  예: 1985년 3월 15일 → 19850315     │  ← 힌트
└─────────────────────────────────────┘

- 키보드: 숫자 패드
- 최대 8자
- 65세 이상: 고령자 안내 배지 표시 (선택적)
```

### 3.4 성별 라디오

```
┌───────────────────────────────┐
│  ● 남성        ○ 여성         │
└───────────────────────────────┘

- 크기: 각 버튼 flex-1
- 높이: 48px
- 선택 시: border-orange-500, bg-orange-50
```

### 3.5 국적 드롭다운

```
옵션:
- 대한민국 (기본값)
- 중국
- 베트남
- 네팔
- 미얀마
- 캄보디아
- 태국
- 인도네시아
- 우즈베키스탄
- 기타
```

### 3.6 소속 팀 드롭다운

```
- API에서 현장별 팀 목록 조회
- 예: (주)정이앤지, 협력업체A, 생산1팀
```

### 3.7 직책/직종 필드

```
Datalist 옵션:
- 공사기사
- 전기기사
- 미장기사
- 설비기사
- 안전관리자
- 일반근로자
- 기타 (직접 입력)
```

---

## 4. 선등록 데이터 처리

### 4.1 선등록 배너

```
┌─────────────────────────────────────┐
│  ✓  관리자가 등록한 정보를 불러왔습니다  │
└─────────────────────────────────────┘

배경: Green 50
테두리: Green 200
아이콘: Check (Green 600)
텍스트: Green 700
```

### 4.2 Pre-fill 로직

```typescript
// 선등록 데이터가 있으면 자동 완성
if (preRegisteredData) {
  setName(preRegisteredData.name);
  setBirthDate(preRegisteredData.birthDate);
  setGender(preRegisteredData.gender);
  setTeamId(preRegisteredData.teamId);
  setJobTitle(preRegisteredData.jobTitle);
}
```

### 4.3 데이터 충돌 처리

```
사용자가 선등록 데이터를 수정하면:
1. 팝업 표시: "관리자 등록 정보와 다릅니다. 입력한 정보로 가입하시겠습니까?"
2. [확인] 시: isDataConflict = true로 전송
3. [취소] 시: 원래 값으로 복원
```

---

## 5. 검증 규칙

### 5.1 실시간 검증

| 필드 | 규칙 | 에러 메시지 |
|------|------|------------|
| 이름 | 2자 이상 | "이름은 2자 이상 입력해주세요" |
| 생년월일 | 8자리 & 유효 날짜 | "올바른 생년월일을 입력해주세요" |
| 이메일 | 이메일 형식 | "올바른 이메일 형식을 입력해주세요" |

### 5.2 제출 시 검증

```typescript
const validate = () => {
  if (!name || name.length < 2) return '이름을 입력해주세요';
  if (!birthDate || birthDate.length !== 8) return '생년월일을 입력해주세요';
  if (!gender) return '성별을 선택해주세요';
  if (!nationality) return '국적을 선택해주세요';
  if (!teamId) return '소속 팀을 선택해주세요';
  if (!jobTitle) return '직책/직종을 입력해주세요';
  return null;
};
```

---

## 6. 상태별 UI

### 6.1 Default (직접가입)

```
- 모든 필드 빈 상태
- 선등록 배너 숨김
- 버튼 비활성
```

### 6.2 Pre-filled (선등록)

```
- 필드 자동 완성
- 선등록 배너 표시
- 필드 수정 가능
```

### 6.3 Valid

```
- 모든 필수 필드 입력
- 버튼 활성화 (Orange Gradient)
```

### 6.4 Error

```
- 해당 필드 border-red-500
- 에러 메시지 표시 (필드 아래)
```

---

## 7. 인터랙션

### 7.1 스크롤

```
- 키보드 표시 시 활성 필드가 보이도록 스크롤
- KeyboardAvoidingView 사용
```

### 7.2 다음 버튼

```
1. 모든 필드 검증
2. 에러 시: 첫 번째 에러 필드로 스크롤
3. 성공 시: A06 약관 동의로 이동
```

### 7.3 뒤로가기 처리

**조건:** 다음 중 하나라도 입력된 경우 경고 팝업 표시
- 이름, 생년월일, 이메일, 성별, 국적, 소속팀, 직책

**팝업 스펙:** (→ `00-common-popup-modal.md` 10.9 참조)
```
제목: "정보 입력을 중단하시겠습니까?"
설명: "입력한 정보가 저장되지 않습니다."
버튼: [취소] [나가기]
```

**구현 예시:**
```typescript
const [showExitWarning, setShowExitWarning] = useState(false);

const hasUnsavedData = useMemo(() => {
  // 선등록 데이터가 있는 경우, 수정 여부 확인
  if (preRegisteredData) {
    return name !== preRegisteredData.name ||
           birthDate !== preRegisteredData.birthDate ||
           /* ... 기타 필드 비교 */;
  }
  // 직접 가입의 경우, 입력값 존재 여부 확인
  return !!(name || birthDate || email || gender || nationality || teamId || jobTitle);
}, [name, birthDate, email, gender, nationality, teamId, jobTitle, preRegisteredData]);

// Android 하드웨어 뒤로가기 처리
useEffect(() => {
  const backHandler = BackHandler.addEventListener('hardwareBackPress', () => {
    if (hasUnsavedData) {
      setShowExitWarning(true);
      return true; // 기본 동작 방지
    }
    return false; // 기본 뒤로가기 허용
  });
  return () => backHandler.remove();
}, [hasUnsavedData]);
```

---

## 8. 데이터 전달

```typescript
interface WorkerInfoData {
  name: string;
  birthDate: string;       // YYYYMMDD
  phoneNumber: string;     // 인증된 번호
  email?: string;
  gender: 'M' | 'F';
  nationality: string;
  teamId: string;
  jobTitle: string;
  isPreRegistered: boolean;
  isDataConflict: boolean;
}
```

---

## 9. Figma 프레임 목록

| 프레임명 | 설명 |
|----------|------|
| `A05 정보입력 / Default` | 빈 상태 (직접가입) |
| `A05 정보입력 / PreFilled` | 선등록 데이터 |
| `A05 정보입력 / Filled` | 모든 필드 입력 |
| `A05 정보입력 / Error` | 검증 오류 |
| `A05 정보입력 / Conflict` | 데이터 충돌 팝업 |
| `A05 정보입력 / BackExit` | 뒤로가기 경고 팝업 |
| `A05 정보입력 / Dropdown` | 드롭다운 열림 상태 |
