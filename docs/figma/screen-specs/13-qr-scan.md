# Q01 QR ìŠ¤ìº” (QR Scanner)

> **í™”ë©´ ID**: Q01
> **íŒŒì¼ëª…**: `13-qr-scan.md`
> **ìƒíƒœ**: Phase 1 MVP

---

## 1. ê¸°ë³¸ ì •ë³´

| í•­ëª© | ë‚´ìš© |
|------|------|
| **í™”ë©´ëª…** | QR ìŠ¤ìº” |
| **ì˜ë¬¸ëª…** | QR Scanner |
| **ì ‘ê·¼ ì¡°ê±´** | role == 'TEAM_ADMIN' \|\| 'SITE_ADMIN' \|\| 'SUPER_ADMIN' |
| **í•˜ë‹¨ íƒ­** | QRìŠ¤ìº” (í™œì„±) |

---

## 2. ë ˆì´ì•„ì›ƒ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â†       QR ìŠ¤ìº”                    â”‚  â† í—¤ë”
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                             â”‚   â”‚
â”‚  â”‚                             â”‚   â”‚
â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚     â”‚                 â”‚     â”‚   â”‚
â”‚  â”‚     â”‚   [ì¹´ë©”ë¼ ë·°]    â”‚     â”‚   â”‚  â† ì¹´ë©”ë¼ ì˜ì—­
â”‚  â”‚     â”‚                 â”‚     â”‚   â”‚
â”‚  â”‚     â”‚   â•”â•â•â•â•â•â•â•â•—     â”‚     â”‚   â”‚  â† ìŠ¤ìº” í”„ë ˆì„
â”‚  â”‚     â”‚   â•‘       â•‘     â”‚     â”‚   â”‚
â”‚  â”‚     â”‚   â•šâ•â•â•â•â•â•â•â•     â”‚     â”‚   â”‚
â”‚  â”‚     â”‚                 â”‚     â”‚   â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â”‚                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚      ê·¼ë¡œì QR ì½”ë“œë¥¼ ìŠ¤ìº”í•´ì£¼ì„¸ìš”    â”‚  â† ì•ˆë‚´ í…ìŠ¤íŠ¸
â”‚                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚    â”‚  ì¶œê·¼   â”‚    â”‚  í‡´ê·¼   â”‚      â”‚  â† ìŠ¤ìº” ëª¨ë“œ í† ê¸€
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  í™ˆ    ì¶œí‡´ê·¼    [QR]     MY       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. UI ì»´í¬ë„ŒíŠ¸

### 3.1 í—¤ë”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â†       QR ìŠ¤ìº”                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

íƒ€ì…: íƒ€ì´í‹€ í—¤ë”
ë’¤ë¡œê°€ê¸°: ì´ì „ í™”ë©´ (í™ˆ)
ì œëª©: "QR ìŠ¤ìº”", 18px, Bold, Slate 800
```

### 3.2 ì¹´ë©”ë¼ ì˜ì—­

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚
â”‚     â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—       â”‚
â”‚     â•‘                      â•‘       â”‚
â”‚     â•‘   [ì¹´ë©”ë¼ í”„ë¦¬ë·°]     â•‘       â”‚
â”‚     â•‘                      â•‘       â”‚
â”‚     â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘       â”‚
â”‚     â•‘    â”‚ ìŠ¤ìº”ì˜ì—­  â”‚      â•‘       â”‚  â† 280x280
â”‚     â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘       â”‚
â”‚     â•‘                      â•‘       â”‚
â”‚     â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•       â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ì¹´ë©”ë¼: ì „ì²´ ë„ˆë¹„, ë†’ì´ flex-1
ìŠ¤ìº” í”„ë ˆì„: 280x280, í°ìƒ‰ ëª¨ì„œë¦¬ (4ê°œ ì½”ë„ˆ)
ëª¨ì„œë¦¬ ë‘ê»˜: 4px
ëª¨ì„œë¦¬ ê¸¸ì´: 32px
ë°°ê²½ ì˜¤ë²„ë ˆì´: ë°˜íˆ¬ëª… ê²€ì • (rgba(0,0,0,0.6))
```

### 3.3 ìŠ¤ìº” í”„ë ˆì„ ë””ìì¸

```
     â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€
         â”‚                 â”‚


         â”‚                 â”‚
     â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€

4ê°œ ì½”ë„ˆ: White, 4px ë‘ê»˜, 32px ê¸¸ì´
ì¤‘ì•™ ìŠ¤ìº” ì˜ì—­: 280x280 íˆ¬ëª…
```

### 3.4 ì•ˆë‚´ í…ìŠ¤íŠ¸

```
   ê·¼ë¡œì QR ì½”ë“œë¥¼ ìŠ¤ìº”í•´ì£¼ì„¸ìš”

í°íŠ¸: 16px, Medium
ìƒ‰ìƒ: White (ì¹´ë©”ë¼ ë°°ê²½ ìœ„)
ë˜ëŠ” Slate 600 (ì¹´ë©”ë¼ ë°–)
ì •ë ¬: ì¤‘ì•™
```

### 3.5 ìŠ¤ìº” ëª¨ë“œ í† ê¸€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ì¶œê·¼        â”‚      í‡´ê·¼       â”‚
â”‚   (ì„ íƒë¨)      â”‚    (ë¯¸ì„ íƒ)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ë„ˆë¹„: í™”ë©´ì˜ 80%
ë†’ì´: 48px
ëª¨ì„œë¦¬: 24px (pill shape)
ì„ íƒë¨: Orange 500 ë°°ê²½, White í…ìŠ¤íŠ¸
ë¯¸ì„ íƒ: Gray 100 ë°°ê²½, Slate 500 í…ìŠ¤íŠ¸
í°íŠ¸: 16px, SemiBold
ì• ë‹ˆë©”ì´ì…˜: ìŠ¬ë¼ì´ë“œ ì „í™˜ (200ms)
```

### 3.6 í”Œë˜ì‹œ í† ê¸€ ë²„íŠ¼ (ì„ íƒì )

```
      [ğŸ”¦]

ìœ„ì¹˜: ì¹´ë©”ë¼ ì˜ì—­ ìš°ì¸¡ ìƒë‹¨
í¬ê¸°: 44x44
ë°°ê²½: rgba(0,0,0,0.3)
ì•„ì´ì½˜: Flashlight, White
ëª¨ì„œë¦¬: 22px (ì›í˜•)
```

---

## 4. ê¶Œí•œ ë¶„ê¸°

### 4.1 TEAM_ADMIN

```
- ìê¸° íŒ€ì›ì˜ QRë§Œ ìŠ¤ìº” ê°€ëŠ¥
- ë‹¤ë¥¸ íŒ€ ê·¼ë¡œì ìŠ¤ìº” ì‹œ ì—ëŸ¬
```

### 4.2 SITE_ADMIN / SUPER_ADMIN

```
- í˜„ì¥ ë‚´ ëª¨ë“  ê·¼ë¡œì QR ìŠ¤ìº” ê°€ëŠ¥
- ë‹¤ë¥¸ í˜„ì¥ ê·¼ë¡œì ìŠ¤ìº” ì‹œ ì—ëŸ¬
```

---

## 5. ìƒíƒœë³„ UI

### 5.1 ì¹´ë©”ë¼ ë¡œë”©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚
â”‚           ì¹´ë©”ë¼ ë¡œë”© ì¤‘...          â”‚
â”‚              â³                     â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 ì¹´ë©”ë¼ ê¶Œí•œ ì—†ìŒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚
â”‚         ğŸ“·                          â”‚
â”‚                                     â”‚
â”‚   ì¹´ë©”ë¼ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤            â”‚
â”‚                                     â”‚
â”‚   QR ìŠ¤ìº”ì„ ìœ„í•´ ì¹´ë©”ë¼ ì ‘ê·¼ì„        â”‚
â”‚   í—ˆìš©í•´ì£¼ì„¸ìš”.                      â”‚
â”‚                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚     ì„¤ì •ìœ¼ë¡œ ì´ë™        â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 ìŠ¤ìº” ì¤‘

```
- ì •ìƒ ì¹´ë©”ë¼ í™”ë©´ í‘œì‹œ
- ìŠ¤ìº” í”„ë ˆì„ ì• ë‹ˆë©”ì´ì…˜ (ì„ íƒì )
- ë ˆì´ì € ìŠ¤ìº”ë¼ì¸ (ìœ„ì•„ë˜ ì´ë™)
```

### 5.4 ìŠ¤ìº” ê°ì§€ë¨

```
- QR ê°ì§€ ì‹œ í”„ë ˆì„ ìƒ‰ìƒ ë³€ê²½ (Green)
- ì§„ë™ í”¼ë“œë°± (Haptic)
- ìë™ìœ¼ë¡œ Q02 ë˜ëŠ” Q03 í™”ë©´ ì „í™˜
```

---

## 6. ì¸í„°ë™ì…˜

### 6.1 ëª¨ë“œ ì „í™˜

```
ì¶œê·¼ ëª¨ë“œ:
  - QR ìŠ¤ìº” â†’ ì¶œê·¼ ì²˜ë¦¬ API
  - ì´ë¯¸ ì¶œê·¼í•œ ê·¼ë¡œì: ì—ëŸ¬ í‘œì‹œ

í‡´ê·¼ ëª¨ë“œ:
  - QR ìŠ¤ìº” â†’ í‡´ê·¼ ì²˜ë¦¬ API
  - ì¶œê·¼ ê¸°ë¡ ì—†ëŠ” ê·¼ë¡œì: ì—ëŸ¬ í‘œì‹œ
```

### 6.2 QR ìŠ¤ìº” ì„±ê³µ í”Œë¡œìš°

```
1. QR ê°ì§€
2. QR í˜ì´ë¡œë“œ íŒŒì‹±
3. ì„œëª… ê²€ì¦
4. ë§Œë£Œ ì‹œê°„ í™•ì¸ (30ì´ˆ ì´ë‚´)
5. API í˜¸ì¶œ (ì¶œê·¼/í‡´ê·¼)
6. ê²°ê³¼ í™”ë©´ í‘œì‹œ (Q02/Q03)
```

### 6.3 QR ìœ íš¨ì„± ê²€ì‚¬

```typescript
const validateQR = (payload: QRPayload) => {
  // 1. ì„œëª… ê²€ì¦
  if (!verifySignature(payload)) {
    return { valid: false, error: 'INVALID_SIGNATURE' };
  }

  // 2. ë§Œë£Œ í™•ì¸ (30ì´ˆ)
  if (Date.now() > payload.expiresAt) {
    return { valid: false, error: 'QR_EXPIRED' };
  }

  // 3. ê¶Œí•œ í™•ì¸ (íŒ€/í˜„ì¥)
  if (!hasPermission(payload.workerId)) {
    return { valid: false, error: 'NO_PERMISSION' };
  }

  return { valid: true };
};
```

---

## 7. API ì—°ë™

### ì¶œê·¼ ìŠ¤ìº” Request

```typescript
POST /functions/v1/scan-check-in

{
  "qrPayload": {
    "workerId": "uuid-worker",
    "timestamp": 1736745600000,
    "expiresAt": 1736745630000,
    "signature": "hmac-sha256-hash"
  },
  "scannerUserId": "uuid-scanner"
}
```

### í‡´ê·¼ ìŠ¤ìº” Request

```typescript
POST /functions/v1/scan-check-out

{
  "qrPayload": {
    "workerId": "uuid-worker",
    "timestamp": 1736745600000,
    "expiresAt": 1736745630000,
    "signature": "hmac-sha256-hash"
  },
  "scannerUserId": "uuid-scanner",
  "attendanceId": "uuid-attendance"  // ì¶œê·¼ ê¸°ë¡ ID
}
```

### Response (ì„±ê³µ)

```typescript
{
  "success": true,
  "worker": {
    "id": "uuid",
    "name": "í™ê¸¸ë™",
    "teamName": "(ì£¼)ì •ì´ì•¤ì§€",
    "jobTitle": "ì „ê¸°ê¸°ì‚¬"
  },
  "attendance": {
    "id": "uuid",
    "checkInTime": "2026-01-13T09:00:00+09:00",
    "checkOutTime": null  // ì¶œê·¼ ì‹œ
  }
}
```

### Response (ì—ëŸ¬)

```typescript
{
  "success": false,
  "error": {
    "code": "ALREADY_CHECKED_IN",  // or "NOT_CHECKED_IN", "QR_EXPIRED", etc.
    "message": "ì´ë¯¸ ì¶œê·¼í•œ ê·¼ë¡œìì…ë‹ˆë‹¤"
  }
}
```

---

## 8. ì—ëŸ¬ ì²˜ë¦¬

| ì—ëŸ¬ ì½”ë“œ | ë©”ì‹œì§€ | ì²˜ë¦¬ |
|----------|--------|------|
| `QR_EXPIRED` | QR ì½”ë“œê°€ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤ | Q03 í™”ë©´ í‘œì‹œ |
| `INVALID_SIGNATURE` | ìœ íš¨í•˜ì§€ ì•Šì€ QR ì½”ë“œì…ë‹ˆë‹¤ | Q03 í™”ë©´ í‘œì‹œ |
| `ALREADY_CHECKED_IN` | ì´ë¯¸ ì¶œê·¼í•œ ê·¼ë¡œìì…ë‹ˆë‹¤ | Q03 í™”ë©´ í‘œì‹œ |
| `NOT_CHECKED_IN` | ì¶œê·¼ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤ | Q03 í™”ë©´ í‘œì‹œ |
| `NO_PERMISSION` | ìŠ¤ìº” ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤ | Q03 í™”ë©´ í‘œì‹œ |
| `WORKER_NOT_FOUND` | ê·¼ë¡œìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ | Q03 í™”ë©´ í‘œì‹œ |

---

## 9. ë””ìì¸ í† í°

```tsx
// ìŠ¤ìº” í”„ë ˆì„
const scanFrame = {
  size: 280,
  cornerLength: 32,
  cornerWidth: 4,
  cornerColor: 'white',
};

// ì˜¤ë²„ë ˆì´
const overlay = {
  backgroundColor: 'rgba(0, 0, 0, 0.6)',
};

// ëª¨ë“œ í† ê¸€
const modeToggle = {
  activeBackground: 'bg-orange-500',
  activeText: 'text-white',
  inactiveBackground: 'bg-gray-100',
  inactiveText: 'text-slate-500',
  height: 48,
  borderRadius: 24,
};

// ìŠ¤ìº”ë¼ì¸ ì• ë‹ˆë©”ì´ì…˜
const scanlineAnimation = {
  duration: 2000,
  translateY: [0, 260, 0],
  color: 'rgba(249, 115, 22, 0.5)',  // Orange 500 ë°˜íˆ¬ëª…
};
```

---

## 10. Figma í”„ë ˆì„ ëª©ë¡

| í”„ë ˆì„ëª… | ì„¤ëª… |
|----------|------|
| `Q01 QRìŠ¤ìº” / Default` | ê¸°ë³¸ ìŠ¤ìº” í™”ë©´ (ì¶œê·¼ ëª¨ë“œ) |
| `Q01 QRìŠ¤ìº” / CheckoutMode` | í‡´ê·¼ ëª¨ë“œ ì„ íƒë¨ |
| `Q01 QRìŠ¤ìº” / Scanning` | QR ê°ì§€ ì¤‘ |
| `Q01 QRìŠ¤ìº” / NoPermission` | ì¹´ë©”ë¼ ê¶Œí•œ ì—†ìŒ |
| `Q01 QRìŠ¤ìº” / Loading` | ì¹´ë©”ë¼ ë¡œë”© ì¤‘ |
