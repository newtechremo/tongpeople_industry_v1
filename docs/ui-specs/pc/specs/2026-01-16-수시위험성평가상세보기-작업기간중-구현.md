# ìˆ˜ì‹œ ìœ„í—˜ì„±í‰ê°€ ìƒì„¸ë³´ê¸° (ì‘ì—…ê¸°ê°„ì¤‘) - êµ¬í˜„ ëª…ì„¸ì„œ

> **ì›ë³¸**: `C:\hongtong\reference\figma\ìœ„í—˜ì„±í‰ê°€ PCê´€ë¦¬ì\í˜„ì¥í†µ 2.0 PC ê´€ë¦¬ì -ìœ„í—˜ì„±í‰ê°€ ë¬¸ì„œ ìƒì„¸ë³´ê¸° ë° ìˆ˜ì‹œ ìƒì„¸ë³´ê¸°ì—ì„œ ì¶”ê°€ í™”ë©´.mp4`
> **ìƒì„±ì¼**: 2026-01-16
> **í”Œë«í¼**: PC (admin-web)
> **ë¬¸ì„œ ìœ í˜•**: êµ¬í˜„ ëª…ì„¸ì„œ (2ë‹¨ê³„)
> **ê¸°íš ë¬¸ì„œ**: `docs/ui-specs/pc/plans/2026-01-16-ìˆ˜ì‹œìœ„í—˜ì„±í‰ê°€ìƒì„¸ë³´ê¸°-ì‘ì—…ê¸°ê°„ì¤‘-ê¸°íš.md`

---

## 1. ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

### 1.1 íŒŒì¼ êµ¬ì¡°

```
src/
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ risk-assessment/
â”‚       â””â”€â”€ AdhocAssessmentDetailPage.tsx          # ë©”ì¸ í˜ì´ì§€
â”œâ”€â”€ components/
â”‚   â””â”€â”€ risk-assessment/
â”‚       â””â”€â”€ detail/
â”‚           â”‚â”€â”€ adhoc/
â”‚           â”‚   â”œâ”€â”€ AdhocDetailHeader.tsx          # ìˆ˜ì‹œ ì „ìš© í—¤ë”
â”‚           â”‚   â”œâ”€â”€ FrequencyIntensityCard.tsx     # ë¹ˆë„Â·ê°•ë„ ìœ„í—˜ìš”ì¸ ì¹´ë“œ
â”‚           â”‚   â”œâ”€â”€ ActionInfoSection.tsx          # ì¡°ì¹˜ ì •ë³´ ì„¹ì…˜
â”‚           â”‚   â”œâ”€â”€ ReviewContentInput.tsx         # ê²€í†  ë‚´ìš© ì…ë ¥
â”‚           â”‚   â”œâ”€â”€ ReviewTagList.tsx              # ê²€í†  íƒœê·¸ ëª©ë¡
â”‚           â”‚   â”œâ”€â”€ OptionalInfoSection.tsx        # ì„ íƒ ì •ë³´ ì…ë ¥ ì˜ì—­
â”‚           â”‚   â”œâ”€â”€ TagInputField.tsx              # íƒœê·¸ ì…ë ¥ í•„ë“œ
â”‚           â”‚   â”œâ”€â”€ TagBadge.tsx                   # íƒœê·¸ ë±ƒì§€
â”‚           â”‚   â”œâ”€â”€ CollapsibleSection.tsx         # ì ‘ì´ì‹ ì„¹ì…˜
â”‚           â”‚   â”œâ”€â”€ UnconfirmedWorkerSection.tsx   # ë¯¸í™•ì¸ ê·¼ë¡œì ì„¹ì…˜
â”‚           â”‚   â”œâ”€â”€ AdditionalRiskSection.tsx      # ì¶”ê°€ ìœ„í—˜ ìš”ì¸ ì„¹ì…˜
â”‚           â”‚   â”œâ”€â”€ AdditionalRiskCard.tsx         # ì¶”ê°€ ìœ„í—˜ ìš”ì¸ ì¹´ë“œ
â”‚           â”‚   â”œâ”€â”€ ActionResultSection.tsx        # ì¡°ì¹˜ ê²°ê³¼ ì„¹ì…˜
â”‚           â”‚   â”œâ”€â”€ ActionResultCard.tsx           # ì¡°ì¹˜ ê²°ê³¼ ì¹´ë“œ
â”‚           â”‚   â”œâ”€â”€ AdditionalRiskModal.tsx        # ì¶”ê°€ ìœ„í—˜ ìš”ì¸ ëª¨ë‹¬
â”‚           â”‚   â”œâ”€â”€ ActionResultModal.tsx          # ì¡°ì¹˜ ê²°ê³¼ ëª¨ë‹¬
â”‚           â”‚   â”œâ”€â”€ PhotoUploader.tsx              # ì‚¬ì§„ ì—…ë¡œë“œ
â”‚           â”‚   â”œâ”€â”€ PrivacyConsentModal.tsx        # ê°œì¸ì •ë³´ ë™ì˜ ëª¨ë‹¬
â”‚           â”‚   â””â”€â”€ SuccessMessageModal.tsx        # ì„±ê³µ ë©”ì‹œì§€ ëª¨ë‹¬
â”‚           â””â”€â”€ shared/
â”‚               â””â”€â”€ SubCategoryDropdown.tsx        # ì‘ì—… ê³µì¢… ë“œë¡­ë‹¤ìš´
â””â”€â”€ hooks/
    â””â”€â”€ risk-assessment/
        â”œâ”€â”€ useAdhocAssessmentDetail.ts            # ìƒì„¸ ì¡°íšŒ í›…
        â”œâ”€â”€ useReviewContent.ts                    # ê²€í†  ë‚´ìš© ê´€ë¦¬ í›…
        â”œâ”€â”€ useTagInput.ts                         # íƒœê·¸ ì…ë ¥ í›…
        â”œâ”€â”€ useAdditionalRisk.ts                   # ì¶”ê°€ ìœ„í—˜ ìš”ì¸ í›…
        â””â”€â”€ useActionResult.ts                     # ì¡°ì¹˜ ê²°ê³¼ í›…
```

### 1.2 ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬

```
AdhocAssessmentDetailPage
â”œâ”€â”€ AdhocDetailHeader
â”‚   â”œâ”€â”€ RewriteButton (ì¬ì‘ì„±)
â”‚   â”œâ”€â”€ ExportDropdown
â”‚   â””â”€â”€ DeleteButton
â”œâ”€â”€ ApprovalLineEditable
â”œâ”€â”€ FrequencyIntensityCard[] (ë¹ˆë„Â·ê°•ë„ ìœ„í—˜ìš”ì¸)
â”‚   â”œâ”€â”€ ActionInfoSection
â”‚   â”œâ”€â”€ ReviewContentInput
â”‚   â””â”€â”€ ReviewTagList
â”œâ”€â”€ OptionalInfoSection
â”‚   â”œâ”€â”€ TagInputField (ìˆœíšŒì ê²€ì‚¬í•­)
â”‚   â””â”€â”€ TagInputField (ì•„ì°¨ì‚¬ê³ )
â”œâ”€â”€ CollapsibleSection (ê¸ˆì¼ ë¯¸í™•ì¸ ê·¼ë¡œì)
â”‚   â””â”€â”€ UnconfirmedWorkerSection
â”œâ”€â”€ CollapsibleSection (ì¶”ê°€ ìœ„í—˜ ìš”ì¸)
â”‚   â””â”€â”€ AdditionalRiskSection
â”‚       â”œâ”€â”€ RegisterButton
â”‚       â””â”€â”€ AdditionalRiskCard[]
â”œâ”€â”€ CollapsibleSection (ì¡°ì¹˜ ê²°ê³¼)
â”‚   â””â”€â”€ ActionResultSection
â”‚       â”œâ”€â”€ RegisterButton
â”‚       â””â”€â”€ ActionResultCard[]
â”œâ”€â”€ AdditionalRiskModal
â”œâ”€â”€ ActionResultModal
â”œâ”€â”€ PrivacyConsentModal
â””â”€â”€ SuccessMessageModal
```

---

## 2. ì»´í¬ë„ŒíŠ¸ ë§¤í•‘

### 2.1 ë§¤í•‘ ê²°ê³¼ ìš”ì•½

| ìƒíƒœ | ê°œìˆ˜ |
|------|------|
| âœ… ê¸°ì¡´ ì‚¬ìš© | 5ê°œ |
| ğŸ†• ì‹ ê·œ í•„ìš” | 21ê°œ |
| âš ï¸ ìˆ˜ì • í•„ìš” | 0ê°œ |

### 2.2 ìƒì„¸ ë§¤í•‘

| UI ìš”ì†Œ | ìƒíƒœ | ì»´í¬ë„ŒíŠ¸ | ê²½ë¡œ |
|---------|------|----------|------|
| í˜ì´ì§€ ë ˆì´ì•„ì›ƒ | âœ… | ê¸°ì¡´ Layout | `src/App.tsx` |
| ì‚¬ì´ë“œë°” | âœ… | `Sidebar` | `src/components/Sidebar.tsx` |
| í—¤ë” | âœ… | `Header` | `src/components/Header.tsx` |
| ì•„ì´ì½˜ (lucide) | âœ… | ChevronDown, Plus, X, Camera ë“± | `lucide-react` |
| ê²°ì¬ ë¼ì¸ (í¸ì§‘) | âœ… | `ApprovalLineEditable` | `src/components/risk-assessment/detail/ApprovalLineEditable.tsx` |
| ìˆ˜ì‹œ ìƒì„¸ í˜ì´ì§€ | ğŸ†• | `AdhocAssessmentDetailPage` | - |
| ìˆ˜ì‹œ ì „ìš© í—¤ë” | ğŸ†• | `AdhocDetailHeader` | - |
| ë¹ˆë„Â·ê°•ë„ ì¹´ë“œ | ğŸ†• | `FrequencyIntensityCard` | - |
| ì¡°ì¹˜ ì •ë³´ ì„¹ì…˜ | ğŸ†• | `ActionInfoSection` | - |
| ê²€í†  ë‚´ìš© ì…ë ¥ | ğŸ†• | `ReviewContentInput` | - |
| ê²€í†  íƒœê·¸ ëª©ë¡ | ğŸ†• | `ReviewTagList` | - |
| ì„ íƒ ì •ë³´ ì„¹ì…˜ | ğŸ†• | `OptionalInfoSection` | - |
| íƒœê·¸ ì…ë ¥ í•„ë“œ | ğŸ†• | `TagInputField` | - |
| íƒœê·¸ ë±ƒì§€ | ğŸ†• | `TagBadge` | - |
| ì ‘ì´ì‹ ì„¹ì…˜ | ğŸ†• | `CollapsibleSection` | - |
| ë¯¸í™•ì¸ ê·¼ë¡œì ì„¹ì…˜ | ğŸ†• | `UnconfirmedWorkerSection` | - |
| ì¶”ê°€ ìœ„í—˜ ìš”ì¸ ì„¹ì…˜ | ğŸ†• | `AdditionalRiskSection` | - |
| ì¶”ê°€ ìœ„í—˜ ìš”ì¸ ì¹´ë“œ | ğŸ†• | `AdditionalRiskCard` | - |
| ì¡°ì¹˜ ê²°ê³¼ ì„¹ì…˜ | ğŸ†• | `ActionResultSection` | - |
| ì¡°ì¹˜ ê²°ê³¼ ì¹´ë“œ | ğŸ†• | `ActionResultCard` | - |
| ì¶”ê°€ ìœ„í—˜ ìš”ì¸ ëª¨ë‹¬ | ğŸ†• | `AdditionalRiskModal` | - |
| ì¡°ì¹˜ ê²°ê³¼ ëª¨ë‹¬ | ğŸ†• | `ActionResultModal` | - |
| ì‚¬ì§„ ì—…ë¡œë” | ğŸ†• | `PhotoUploader` | - |
| ê°œì¸ì •ë³´ ë™ì˜ ëª¨ë‹¬ | ğŸ†• | `PrivacyConsentModal` | - |
| ì„±ê³µ ë©”ì‹œì§€ ëª¨ë‹¬ | ğŸ†• | `SuccessMessageModal` | - |
| ì‘ì—… ê³µì¢… ë“œë¡­ë‹¤ìš´ | ğŸ†• | `SubCategoryDropdown` | - |

---

## 3. ì»´í¬ë„ŒíŠ¸ ëª…ì„¸

### 3.1 FrequencyIntensityCard

**íŒŒì¼**: `src/components/risk-assessment/detail/adhoc/FrequencyIntensityCard.tsx`

```tsx
interface FrequencyIntensityCardProps {
  riskFactor: {
    id: string;
    description: string;
    currentMeasures: string;
    frequency: number;           // ë¹ˆë„ (1-5)
    intensity: number;           // ê°•ë„ (1-4)
    grade: 'low' | 'medium' | 'high';
    improvedFrequency?: number;  // ê°œì„  í›„ ë¹ˆë„
    improvedIntensity?: number;  // ê°œì„  í›„ ê°•ë„
    improvedGrade?: 'low' | 'medium' | 'high';
    actionInfo: {
      actionDate?: string;
      actionPerson?: string;
      actionConfirmer?: string;
    };
    reviews: { id: string; content: string }[];
  };
  onAddReview: (content: string) => Promise<void>;
  onDeleteReview: (reviewId: string) => Promise<void>;
}
```

**ìŠ¤íƒ€ì¼ë§**:
```tsx
// ì¹´ë“œ ì»¨í…Œì´ë„ˆ
className="p-6 bg-white border border-gray-200 rounded-xl space-y-6"

// ë¹ˆë„/ê°•ë„/ë“±ê¸‰ ê·¸ë¦¬ë“œ
className="grid grid-cols-3 gap-4"

// ìˆ«ì í‘œì‹œ ë°•ìŠ¤
className="flex items-center justify-center w-12 h-12 bg-gray-100 rounded-lg text-lg font-bold"

// ë“±ê¸‰ ë±ƒì§€ - í•˜
className="px-4 py-2 rounded-full bg-green-100 text-green-700 font-medium"

// ë“±ê¸‰ ë±ƒì§€ - ì¤‘
className="px-4 py-2 rounded-full bg-yellow-100 text-yellow-700 font-medium"

// ë“±ê¸‰ ë±ƒì§€ - ìƒ
className="px-4 py-2 rounded-full bg-red-100 text-red-700 font-medium"

// ê°œì„  í›„ ì„¹ì…˜
className="p-4 bg-blue-50 rounded-lg"
```

### 3.2 TagInputField

**íŒŒì¼**: `src/components/risk-assessment/detail/adhoc/TagInputField.tsx`

```tsx
interface TagInputFieldProps {
  label: string;
  tags: { id: string; content: string }[];
  onAdd: (content: string) => Promise<void>;
  onRemove: (tagId: string) => Promise<void>;
  placeholder?: string;
}
```

**ìŠ¤íƒ€ì¼ë§**:
```tsx
// ì»¨í…Œì´ë„ˆ
className="space-y-3"

// ë¼ë²¨
className="text-sm font-medium text-gray-700"

// ì…ë ¥ ì˜ì—­
className="flex gap-2"

// ì…ë ¥ í•„ë“œ
className="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"

// ì¶”ê°€í•˜ê¸° ë²„íŠ¼
className="px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-orange-500 to-orange-600 rounded-lg hover:from-orange-600 hover:to-orange-700"

// íƒœê·¸ ëª©ë¡
className="flex flex-wrap gap-2"
```

### 3.3 TagBadge

**íŒŒì¼**: `src/components/risk-assessment/detail/adhoc/TagBadge.tsx`

```tsx
interface TagBadgeProps {
  content: string;
  onRemove?: () => void;
  variant?: 'default' | 'danger';  // ì•„ì°¨ì‚¬ê³ ëŠ” danger
}
```

**ìŠ¤íƒ€ì¼ë§**:
```tsx
// ê¸°ë³¸ íƒœê·¸
className="inline-flex items-center gap-1 px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm"

// ìœ„í—˜ íƒœê·¸ (ì•„ì°¨ì‚¬ê³ )
className="inline-flex items-center gap-1 px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm"

// ì‚­ì œ ë²„íŠ¼
className="p-0.5 rounded-full hover:bg-gray-200"
```

### 3.4 CollapsibleSection

**íŒŒì¼**: `src/components/risk-assessment/detail/adhoc/CollapsibleSection.tsx`

```tsx
interface CollapsibleSectionProps {
  title: string;
  count?: number;
  defaultOpen?: boolean;
  children: React.ReactNode;
}
```

**ìŠ¤íƒ€ì¼ë§**:
```tsx
// í—¤ë” (í´ë¦­ ì˜ì—­)
className="flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50 rounded-lg"

// ì œëª©
className="text-lg font-bold text-slate-800"

// ê±´ìˆ˜ ë±ƒì§€
className="px-2 py-0.5 text-sm bg-gray-200 text-gray-700 rounded-full ml-2"

// í™”ì‚´í‘œ ì•„ì´ì½˜ (íšŒì „)
className={`w-5 h-5 text-gray-500 transition-transform ${isOpen ? 'rotate-180' : ''}`}

// ì½˜í…ì¸  ì˜ì—­
className="px-4 pb-4"
```

### 3.5 AdditionalRiskCard

**íŒŒì¼**: `src/components/risk-assessment/detail/adhoc/AdditionalRiskCard.tsx`

```tsx
interface AdditionalRiskCardProps {
  risk: {
    id: string;
    photoUrl?: string;
    content: string;
    createdAt: string;
    createdBy: {
      name: string;
      company: string;
      position: string;
    };
  };
  onEdit: () => void;
  onDelete: () => void;
}
```

**ìŠ¤íƒ€ì¼ë§**:
```tsx
// ì¹´ë“œ ì»¨í…Œì´ë„ˆ
className="flex gap-4 p-4 bg-white border border-gray-200 rounded-xl"

// ì¸ë„¤ì¼ ì´ë¯¸ì§€
className="w-24 h-24 rounded-lg object-cover bg-gray-100 flex-shrink-0"

// í”Œë ˆì´ìŠ¤í™€ë” (ì´ë¯¸ì§€ ì—†ìŒ)
className="w-24 h-24 rounded-lg bg-gray-100 flex items-center justify-center flex-shrink-0"

// ì •ë³´ ì˜ì—­
className="flex-1 space-y-2"

// ë‚´ìš© í…ìŠ¤íŠ¸
className="text-gray-900"

// ë©”íƒ€ ì •ë³´
className="text-sm text-gray-500"

// ë²„íŠ¼ ê·¸ë£¹
className="flex gap-2"

// ì‚­ì œ ë²„íŠ¼
className="px-3 py-1.5 text-sm text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200"

// ìˆ˜ì • ë²„íŠ¼
className="px-3 py-1.5 text-sm text-white bg-gray-700 rounded-lg hover:bg-gray-800"
```

### 3.6 AdditionalRiskModal

**íŒŒì¼**: `src/components/risk-assessment/detail/adhoc/AdditionalRiskModal.tsx`

```tsx
interface AdditionalRiskModalProps {
  isOpen: boolean;
  onClose: () => void;
  onSubmit: (data: { photo?: File; content: string }) => Promise<void>;
  initialData?: { photoUrl?: string; content: string };  // ìˆ˜ì • ì‹œ
  mode: 'create' | 'edit';
}
```

**ìŠ¤íƒ€ì¼ë§**:
```tsx
// ëª¨ë‹¬ ì»¨í…Œì´ë„ˆ
className="bg-white rounded-2xl max-w-lg w-full mx-4 max-h-[90vh] overflow-hidden"

// ëª¨ë‹¬ í—¤ë”
className="flex items-center justify-between p-6 border-b border-gray-200"

// ëª¨ë‹¬ ë³¸ë¬¸
className="p-6 space-y-6"

// í•„ë“œ ë¼ë²¨
className="text-sm font-medium text-gray-700 mb-2"

// ë²„íŠ¼ ê·¸ë£¹
className="flex gap-3 p-6 border-t border-gray-200"

// ì·¨ì†Œ ë²„íŠ¼
className="flex-1 px-4 py-3 text-gray-700 bg-gray-100 rounded-xl font-medium hover:bg-gray-200"

// ì„ íƒ ì™„ë£Œ ë²„íŠ¼
className="flex-1 px-4 py-3 text-white bg-gradient-to-r from-orange-500 to-orange-600 rounded-xl font-medium disabled:opacity-50"
```

### 3.7 ActionResultModal

**íŒŒì¼**: `src/components/risk-assessment/detail/adhoc/ActionResultModal.tsx`

```tsx
interface ActionResultModalProps {
  isOpen: boolean;
  onClose: () => void;
  onSubmit: (data: {
    photo?: File;
    subCategoryId: string;
    content: string;
  }) => Promise<void>;
  subCategories: { id: string; name: string }[];  // ì‘ì—… ê³µì¢… ëª©ë¡
  initialData?: {
    photoUrl?: string;
    subCategoryId: string;
    content: string;
  };
  mode: 'create' | 'edit';
}
```

### 3.8 PhotoUploader

**íŒŒì¼**: `src/components/risk-assessment/detail/adhoc/PhotoUploader.tsx`

```tsx
interface PhotoUploaderProps {
  value?: File | string;  // File(ìƒˆ ì—…ë¡œë“œ) ë˜ëŠ” URL(ê¸°ì¡´)
  onChange: (file: File | null) => void;
  onRequireConsent: () => void;  // ê°œì¸ì •ë³´ ë™ì˜ í•„ìš” ì‹œ
  hasConsent: boolean;
}
```

**ìŠ¤íƒ€ì¼ë§**:
```tsx
// ì—…ë¡œë“œ ì˜ì—­ (ì´ë¯¸ì§€ ì—†ìŒ)
className="w-32 h-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center cursor-pointer hover:border-orange-400"

// ë¯¸ë¦¬ë³´ê¸° ì´ë¯¸ì§€
className="w-32 h-32 rounded-lg object-cover"

// ë²„íŠ¼ ê·¸ë£¹
className="flex flex-col gap-2"

// ì‚¬ì§„ ë“±ë¡ ë²„íŠ¼
className="px-4 py-2 text-sm font-medium text-white bg-gray-700 rounded-lg"

// ì‚­ì œ ë²„íŠ¼
className="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg"
```

### 3.9 SubCategoryDropdown

**íŒŒì¼**: `src/components/risk-assessment/detail/shared/SubCategoryDropdown.tsx`

```tsx
interface SubCategoryDropdownProps {
  value: string;
  onChange: (value: string) => void;
  options: { id: string; name: string }[];
  placeholder?: string;
}
```

**ìŠ¤íƒ€ì¼ë§**:
```tsx
// ë“œë¡­ë‹¤ìš´ ë²„íŠ¼
className="w-full px-4 py-3 text-left bg-white border border-gray-300 rounded-lg flex items-center justify-between"

// ë“œë¡­ë‹¤ìš´ ë©”ë‰´
className="absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 max-h-60 overflow-y-auto"

// ë©”ë‰´ ì•„ì´í…œ
className="px-4 py-3 hover:bg-orange-50 cursor-pointer text-gray-700"

// ì„ íƒëœ ì•„ì´í…œ
className="px-4 py-3 bg-orange-50 text-orange-600 cursor-pointer"
```

---

## 4. ìƒíƒœ ê´€ë¦¬

### 4.1 useAdhocAssessmentDetail

```tsx
interface UseAdhocAssessmentDetailReturn {
  data: AdhocAssessmentDetail | null;
  isLoading: boolean;
  error: Error | null;
  refetch: () => void;
}

interface AdhocAssessmentDetail {
  id: string;
  title: string;
  status: 'in_progress' | 'completed';
  approvers: Approver[];
  riskFactors: FrequencyIntensityRiskFactor[];
  inspectionItems: Tag[];
  nearMissTags: Tag[];
  unconfirmedWorkers: Worker[];
  additionalRisks: AdditionalRisk[];
  actionResults: ActionResult[];
}
```

### 4.2 useTagInput

```tsx
function useTagInput(
  assessmentId: string,
  type: 'inspection' | 'nearMiss' | 'review',
  factorId?: string
) {
  const addTag = useMutation({
    mutationFn: (content: string) =>
      addTagAPI(assessmentId, type, content, factorId),
    onSuccess: () => queryClient.invalidateQueries(['adhoc-assessment', assessmentId]),
  });

  const removeTag = useMutation({
    mutationFn: (tagId: string) =>
      removeTagAPI(assessmentId, type, tagId, factorId),
    onSuccess: () => queryClient.invalidateQueries(['adhoc-assessment', assessmentId]),
  });

  return { addTag, removeTag };
}
```

### 4.3 useAdditionalRisk

```tsx
function useAdditionalRisk(assessmentId: string) {
  const create = useMutation({
    mutationFn: (data: { photo?: File; content: string }) =>
      createAdditionalRisk(assessmentId, data),
  });

  const update = useMutation({
    mutationFn: ({ riskId, data }: { riskId: string; data: { photo?: File; content: string } }) =>
      updateAdditionalRisk(assessmentId, riskId, data),
  });

  const remove = useMutation({
    mutationFn: (riskId: string) =>
      deleteAdditionalRisk(assessmentId, riskId),
  });

  return { create, update, remove };
}
```

---

## 5. API ì—°ë™

### 5.1 ìƒì„¸ ì¡°íšŒ

```tsx
// GET /api/risk-assessments/adhoc/{id}
async function fetchAdhocAssessmentDetail(id: string): Promise<AdhocAssessmentDetail> {
  const response = await apiClient.get(`/risk-assessments/adhoc/${id}`);
  return response.data;
}
```

### 5.2 íƒœê·¸ ê´€ë¦¬

```tsx
// POST /api/risk-assessments/adhoc/{id}/inspection-items
// POST /api/risk-assessments/adhoc/{id}/near-miss-tags
// POST /api/risk-assessments/adhoc/{id}/risk-factors/{factorId}/reviews
async function addTag(
  assessmentId: string,
  type: 'inspection' | 'nearMiss' | 'review',
  content: string,
  factorId?: string
): Promise<void> {
  const endpoints = {
    inspection: `/risk-assessments/adhoc/${assessmentId}/inspection-items`,
    nearMiss: `/risk-assessments/adhoc/${assessmentId}/near-miss-tags`,
    review: `/risk-assessments/adhoc/${assessmentId}/risk-factors/${factorId}/reviews`,
  };
  await apiClient.post(endpoints[type], { content });
}
```

### 5.3 ì¶”ê°€ ìœ„í—˜ ìš”ì¸ (FormData)

```tsx
// POST /api/risk-assessments/adhoc/{id}/additional-risks
async function createAdditionalRisk(
  assessmentId: string,
  data: { photo?: File; content: string }
): Promise<void> {
  const formData = new FormData();
  if (data.photo) {
    formData.append('photo', data.photo);
  }
  formData.append('content', data.content);

  await apiClient.post(
    `/risk-assessments/adhoc/${assessmentId}/additional-risks`,
    formData,
    { headers: { 'Content-Type': 'multipart/form-data' } }
  );
}
```

### 5.4 ì¡°ì¹˜ ê²°ê³¼ (FormData)

```tsx
// POST /api/risk-assessments/adhoc/{id}/action-results
async function createActionResult(
  assessmentId: string,
  data: { photo?: File; subCategoryId: string; content: string }
): Promise<void> {
  const formData = new FormData();
  if (data.photo) {
    formData.append('photo', data.photo);
  }
  formData.append('subCategoryId', data.subCategoryId);
  formData.append('content', data.content);

  await apiClient.post(
    `/risk-assessments/adhoc/${assessmentId}/action-results`,
    formData,
    { headers: { 'Content-Type': 'multipart/form-data' } }
  );
}
```

---

## 6. ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜

### 6.1 ë¹ˆë„Â·ê°•ë„ ë“±ê¸‰ ê³„ì‚°

```tsx
// src/utils/risk-assessment/gradeCalculator.ts

type Grade = 'low' | 'medium' | 'high';

export function calculateGrade(frequency: number, intensity: number): Grade {
  const score = frequency * intensity;
  if (score <= 4) return 'low';
  if (score <= 8) return 'medium';
  return 'high';
}

export function getGradeLabel(grade: Grade): string {
  const labels = {
    low: 'í•˜ë“±ê¸‰',
    medium: 'ì¤‘ë“±ê¸‰',
    high: 'ìƒë“±ê¸‰',
  };
  return labels[grade];
}

export function getGradeColor(grade: Grade): string {
  const colors = {
    low: 'green',
    medium: 'yellow',
    high: 'red',
  };
  return colors[grade];
}
```

---

## 7. êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

### 7.1 í˜ì´ì§€ ë° ë ˆì´ì•„ì›ƒ

- [ ] AdhocAssessmentDetailPage
- [ ] AdhocDetailHeader

### 7.2 ìœ„í—˜ìš”ì¸ ê´€ë ¨

- [ ] FrequencyIntensityCard
- [ ] ActionInfoSection
- [ ] ReviewContentInput
- [ ] ReviewTagList

### 7.3 ì„ íƒ ì •ë³´ ì…ë ¥

- [ ] OptionalInfoSection
- [ ] TagInputField
- [ ] TagBadge

### 7.4 ì ‘ì´ì‹ ì„¹ì…˜

- [ ] CollapsibleSection
- [ ] UnconfirmedWorkerSection
- [ ] AdditionalRiskSection
- [ ] AdditionalRiskCard
- [ ] ActionResultSection
- [ ] ActionResultCard

### 7.5 ëª¨ë‹¬

- [ ] AdditionalRiskModal
- [ ] ActionResultModal
- [ ] PhotoUploader
- [ ] PrivacyConsentModal
- [ ] SuccessMessageModal

### 7.6 ê³µí†µ ì»´í¬ë„ŒíŠ¸

- [ ] SubCategoryDropdown

### 7.7 í›… ë° API

- [ ] useAdhocAssessmentDetail
- [ ] useTagInput
- [ ] useAdditionalRisk
- [ ] useActionResult
- [ ] ê´€ë ¨ API í•¨ìˆ˜ë“¤

### 7.8 ìœ í‹¸ë¦¬í‹°

- [ ] calculateGrade
- [ ] getGradeLabel
- [ ] getGradeColor

---

## 8. ì—°ê²° ë¬¸ì„œ

- ê¸°íš ë¬¸ì„œ: `docs/ui-specs/pc/plans/2026-01-16-ìˆ˜ì‹œìœ„í—˜ì„±í‰ê°€ìƒì„¸ë³´ê¸°-ì‘ì—…ê¸°ê°„ì¤‘-ê¸°íš.md`
- ìˆ˜ì‹œ ë§Œë“¤ê¸° êµ¬í˜„: `docs/ui-specs/pc/specs/2026-01-16-ìˆ˜ì‹œë¹ˆë„ê°•ë„ìœ„í—˜ì„±í‰ê°€ë§Œë“¤ê¸°-êµ¬í˜„.md`
