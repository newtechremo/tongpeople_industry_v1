# ìµœì´ˆ ìœ„í—˜ì„±í‰ê°€ ë§Œë“¤ê¸° - êµ¬í˜„ ëª…ì„¸ì„œ

> **ì›ë³¸**: `C:\hongtong\reference\figma\ìœ„í—˜ì„±í‰ê°€ PCê´€ë¦¬ì\í˜„ì¥í†µ ìµœì´ˆ ë§Œë“¤ê¸° ì˜ìƒ.mp4`
> **ìƒì„±ì¼**: 2026-01-16
> **í”Œë«í¼**: PC (admin-web)
> **ë¬¸ì„œ ìœ í˜•**: êµ¬í˜„ ëª…ì„¸ì„œ (2ë‹¨ê³„)
> **ê¸°íš ë¬¸ì„œ**: `docs/ui-specs/pc/plans/2026-01-16-ìµœì´ˆìœ„í—˜ì„±í‰ê°€ë§Œë“¤ê¸°-ê¸°íš.md`

---

## 1. ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

### 1.1 ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬
```
RiskAssessmentPage (ê¸°ì¡´)
â”œâ”€â”€ ListView (ê¸°ì¡´)
â”œâ”€â”€ TypeSelectView (ê¸°ì¡´)
â””â”€â”€ InitialAssessmentForm (ğŸ†• ì‹ ê·œ)
    â”œâ”€â”€ FormHeader
    â”‚   â”œâ”€â”€ BackButton
    â”‚   â””â”€â”€ PageTitle
    â”œâ”€â”€ BasicInfoSection
    â”‚   â”œâ”€â”€ SiteInfoDisplay
    â”‚   â”œâ”€â”€ ApprovalLineSelector
    â”‚   â”œâ”€â”€ WorkerRepTable
    â”‚   â”œâ”€â”€ DateRangePicker
    â”‚   â””â”€â”€ RiskLevelLink
    â”œâ”€â”€ WorkCategorySection
    â”‚   â”œâ”€â”€ CategoryItem (ë°˜ë³µ)
    â”‚   â”‚   â”œâ”€â”€ CategorySearchInput (ğŸ†• ì‹ ê·œ)
    â”‚   â”‚   â”œâ”€â”€ SubcategoryCheckList (ğŸ†• ì‹ ê·œ)
    â”‚   â”‚   â””â”€â”€ RiskFactorCard (ğŸ†• ì‹ ê·œ, ë°˜ë³µ)
    â”‚   â”‚       â”œâ”€â”€ RiskFactorInput
    â”‚   â”‚       â”œâ”€â”€ RiskLevelRadio
    â”‚   â”‚       â”œâ”€â”€ ImprovementInput
    â”‚   â”‚       â””â”€â”€ DateRangePicker
    â”‚   â””â”€â”€ AddCategoryButton
    â”œâ”€â”€ FormActions
    â”‚   â”œâ”€â”€ CancelButton
    â”‚   â””â”€â”€ SubmitButton
    â””â”€â”€ Modals
        â”œâ”€â”€ SubcategoryAddModal (ğŸ†• ì‹ ê·œ)
        â”œâ”€â”€ RiskFactorSelectModal (ğŸ†• ì‹ ê·œ)
        â””â”€â”€ SuccessModal (ğŸ†• ì‹ ê·œ)
```

### 1.2 íŒŒì¼ êµ¬ì¡°
```
src/pages/
â”œâ”€â”€ RiskAssessmentPage.tsx              # ê¸°ì¡´ (ìˆ˜ì •)
â””â”€â”€ risk-assessment/
    â”œâ”€â”€ InitialAssessmentForm.tsx       # ğŸ†• ë©”ì¸ í¼ ì»´í¬ë„ŒíŠ¸
    â”œâ”€â”€ components/
    â”‚   â”œâ”€â”€ BasicInfoSection.tsx        # ğŸ†• ê¸°ë³¸ ì •ë³´ ì„¹ì…˜
    â”‚   â”œâ”€â”€ WorkCategorySection.tsx     # ğŸ†• ì‘ì—… ê³µì¢… ì„¹ì…˜
    â”‚   â”œâ”€â”€ CategoryItem.tsx            # ğŸ†• ëŒ€ë¶„ë¥˜ í•­ëª©
    â”‚   â”œâ”€â”€ CategorySearchInput.tsx     # ğŸ†• ëŒ€ë¶„ë¥˜ ê²€ìƒ‰ ì…ë ¥
    â”‚   â”œâ”€â”€ SubcategoryCheckList.tsx    # ğŸ†• ì†Œë¶„ë¥˜ ì²´í¬ë¦¬ìŠ¤íŠ¸
    â”‚   â”œâ”€â”€ RiskFactorCard.tsx          # ğŸ†• ìœ„í—˜ ìš”ì¸ ì¹´ë“œ
    â”‚   â”œâ”€â”€ SubcategoryAddModal.tsx     # ğŸ†• ì†Œë¶„ë¥˜ ì¶”ê°€ ëª¨ë‹¬
    â”‚   â”œâ”€â”€ RiskFactorSelectModal.tsx   # ğŸ†• ìœ„í—˜ìš”ì¸ ì„ íƒ ëª¨ë‹¬
    â”‚   â””â”€â”€ SuccessModal.tsx            # ğŸ†• ì™„ë£Œ ëª¨ë‹¬
    â””â”€â”€ hooks/
        â””â”€â”€ useInitialAssessment.ts     # ğŸ†• í¼ ìƒíƒœ ê´€ë¦¬ í›…

src/api/
â””â”€â”€ risk-assessment.ts                  # ğŸ†• API í•¨ìˆ˜
```

---

## 2. ì»´í¬ë„ŒíŠ¸ ë§¤í•‘

### 2.1 ë§¤í•‘ ê²°ê³¼ ìš”ì•½
| ìƒíƒœ | ê°œìˆ˜ |
|------|------|
| âœ… ê¸°ì¡´ ì‚¬ìš© | 5ê°œ |
| ğŸ†• ì‹ ê·œ í•„ìš” | 12ê°œ |
| âš ï¸ ìˆ˜ì • í•„ìš” | 1ê°œ |

### 2.2 ìƒì„¸ ë§¤í•‘

| UI ìš”ì†Œ | ìƒíƒœ | ì»´í¬ë„ŒíŠ¸ | ê²½ë¡œ |
|---------|------|----------|------|
| í˜ì´ì§€ ë ˆì´ì•„ì›ƒ | âœ… | ê¸°ì¡´ Layout | `src/App.tsx` |
| ì‚¬ì´ë“œë°” | âœ… | `Sidebar` | `src/components/Sidebar.tsx` |
| í—¤ë” | âœ… | `Header` | `src/components/Header.tsx` |
| ë’¤ë¡œê°€ê¸° ë²„íŠ¼ | âœ… | ChevronLeft (lucide) | - |
| Primary ë²„íŠ¼ | âœ… | ê¸°ì¡´ ìŠ¤íƒ€ì¼ | ì¸ë¼ì¸ í´ë˜ìŠ¤ |
| ìœ„í—˜ì„±í‰ê°€ í˜ì´ì§€ | âš ï¸ | `RiskAssessmentPage` | `src/pages/RiskAssessmentPage.tsx` |
| ì´ˆê¸° í‰ê°€ í¼ | ğŸ†• | `InitialAssessmentForm` | - |
| ê¸°ë³¸ ì •ë³´ ì„¹ì…˜ | ğŸ†• | `BasicInfoSection` | - |
| ì‘ì—… ê³µì¢… ì„¹ì…˜ | ğŸ†• | `WorkCategorySection` | - |
| ëŒ€ë¶„ë¥˜ í•­ëª© | ğŸ†• | `CategoryItem` | - |
| ëŒ€ë¶„ë¥˜ ê²€ìƒ‰ | ğŸ†• | `CategorySearchInput` | - |
| ì†Œë¶„ë¥˜ ì²´í¬ë¦¬ìŠ¤íŠ¸ | ğŸ†• | `SubcategoryCheckList` | - |
| ìœ„í—˜ ìš”ì¸ ì¹´ë“œ | ğŸ†• | `RiskFactorCard` | - |
| ì†Œë¶„ë¥˜ ì¶”ê°€ ëª¨ë‹¬ | ğŸ†• | `SubcategoryAddModal` | - |
| ìœ„í—˜ìš”ì¸ ì„ íƒ ëª¨ë‹¬ | ğŸ†• | `RiskFactorSelectModal` | - |
| ì™„ë£Œ ëª¨ë‹¬ | ğŸ†• | `SuccessModal` | - |
| ë‚ ì§œ ë²”ìœ„ ì„ íƒ | ğŸ†• | `DateRangePicker` | - |

---

## 3. ì‹ ê·œ ì»´í¬ë„ŒíŠ¸ ëª…ì„¸

### 3.1 InitialAssessmentForm

**ëª©ì **: ìµœì´ˆ ìœ„í—˜ì„±í‰ê°€ ì‘ì„± ë©”ì¸ í¼

**Props Interface**:
```typescript
interface InitialAssessmentFormProps {
  siteId: number;
  onCancel: () => void;
  onSuccess: () => void;
}
```

**ìƒíƒœ ê´€ë¦¬**:
```typescript
interface FormState {
  approvalLineId: number | null;
  workPeriodStart: string;
  workPeriodEnd: string;
  categories: CategoryState[];
}

interface CategoryState {
  id: string;  // uuid
  categoryId: number | null;
  categoryName: string;
  subcategories: SubcategoryState[];
}

interface SubcategoryState {
  id: string;
  subcategoryId: number | null;
  subcategoryName: string;
  isCustom: boolean;
  riskFactors: RiskFactorState[];
}

interface RiskFactorState {
  id: string;
  factor: string;
  level: 'HIGH' | 'MEDIUM' | 'LOW';
  improvement: string;
  workPeriodStart: string;
  workPeriodEnd: string;
}
```

### 3.2 CategorySearchInput

**ëª©ì **: ëŒ€ë¶„ë¥˜ ê²€ìƒ‰ ë° ì„ íƒ

**Props Interface**:
```typescript
interface CategorySearchInputProps {
  value: string;
  onChange: (categoryId: number, categoryName: string) => void;
  onClear: () => void;
  placeholder?: string;
}
```

**ë™ì‘**:
1. í…ìŠ¤íŠ¸ ì…ë ¥ ì‹œ debounce ì ìš© (300ms)
2. API í˜¸ì¶œí•˜ì—¬ ë§¤ì¹­ ëª©ë¡ í‘œì‹œ
3. ë“œë¡­ë‹¤ìš´ì—ì„œ ì„ íƒ ì‹œ `onChange` í˜¸ì¶œ
4. X ë²„íŠ¼ í´ë¦­ ì‹œ `onClear` í˜¸ì¶œ

### 3.3 SubcategoryCheckList

**ëª©ì **: ì†Œë¶„ë¥˜ ì²´í¬ë°•ìŠ¤ ë¦¬ìŠ¤íŠ¸

**Props Interface**:
```typescript
interface SubcategoryCheckListProps {
  categoryId: number;
  selectedIds: number[];
  customItems: string[];
  onChange: (selectedIds: number[], customItems: string[]) => void;
  onAddCustom: () => void;
}
```

### 3.4 RiskFactorCard

**ëª©ì **: ìœ„í—˜ ìš”ì¸ ì…ë ¥ ì¹´ë“œ

**Props Interface**:
```typescript
interface RiskFactorCardProps {
  factor: RiskFactorState;
  onChange: (updated: RiskFactorState) => void;
  onDelete: () => void;
  onSearchFactor: () => void;
}
```

### 3.5 SubcategoryAddModal

**ëª©ì **: ì»¤ìŠ¤í…€ ì†Œë¶„ë¥˜ ì¶”ê°€ ëª¨ë‹¬

**Props Interface**:
```typescript
interface SubcategoryAddModalProps {
  isOpen: boolean;
  onClose: () => void;
  onAdd: (name: string) => void;
}
```

**UI êµ¬ì„±**:
- ì œëª©: "ì†Œë¶„ë¥˜ ì§ì ‘ ì¶”ê°€í•˜ê¸°"
- í…ìŠ¤íŠ¸ ì…ë ¥ í•„ë“œ
- ì·¨ì†Œ/ì¶”ê°€í•˜ê¸° ë²„íŠ¼

### 3.6 RiskFactorSelectModal

**ëª©ì **: ë¯¸ë¦¬ ì •ì˜ëœ ìœ„í—˜ìš”ì¸ ì„ íƒ ëª¨ë‹¬

**Props Interface**:
```typescript
interface RiskFactorSelectModalProps {
  isOpen: boolean;
  onClose: () => void;
  categoryId: number;
  subcategoryId: number;
  onSelect: (factors: { factor: string; improvement: string }[]) => void;
}
```

**UI êµ¬ì„±**:
- ì œëª©: "ìœ„í—˜ìš”ì¸ ì„ íƒ"
- ëŒ€ë¶„ë¥˜/ì†Œë¶„ë¥˜ í‘œì‹œ
- ìœ„í—˜ìš”ì¸ ì²´í¬ë°•ìŠ¤ ë¦¬ìŠ¤íŠ¸ (ê°œì„ ëŒ€ì±… í¬í•¨)
- "ì§ì ‘ ì…ë ¥í•˜ê¸°" ì˜µì…˜
- ì·¨ì†Œ/ì„ íƒ ì™„ë£Œ ë²„íŠ¼

### 3.7 SuccessModal

**ëª©ì **: ì €ì¥ ì™„ë£Œ ì•Œë¦¼ ëª¨ë‹¬

**Props Interface**:
```typescript
interface SuccessModalProps {
  isOpen: boolean;
  onConfirm: () => void;
  title?: string;
  message?: string;
}
```

**ê¸°ë³¸ê°’**:
- title: "ìœ„í—˜ì„± í‰ê°€ ì‘ì„± ì™„ë£Œ!"
- message: "ìœ„í—˜ì„± í‰ê°€ê°€ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤."

---

## 4. ìˆ˜ì • í•„ìš” ì»´í¬ë„ŒíŠ¸

### 4.1 RiskAssessmentPage

**í˜„ì¬ ê²½ë¡œ**: `src/pages/RiskAssessmentPage.tsx`

**ìˆ˜ì • ë‚´ìš©**:
1. `view` ìƒíƒœì— `'initial-form'` ì¶”ê°€
2. ìœ í˜• ì„ íƒ í›„ í•´ë‹¹ í¼ìœ¼ë¡œ ë¼ìš°íŒ…
3. `InitialAssessmentForm` import ë° ë Œë”ë§

**ìˆ˜ì • ë°©í–¥**:
```typescript
// ê¸°ì¡´
const [view, setView] = useState<'list' | 'create'>('list');

// ë³€ê²½
const [view, setView] = useState<'list' | 'create' | 'initial-form'>('list');

// handleStartCreate ìˆ˜ì •
const handleStartCreate = () => {
  if (!selectedType) {
    alert('ìœ„í—˜ì„±í‰ê°€ ìœ í˜•ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
    return;
  }

  if (selectedType === 'INITIAL') {
    setView('initial-form');
  } else {
    // TODO: ë‹¤ë¥¸ ìœ í˜• í¼
    alert(`${ASSESSMENT_TYPES.find(t => t.id === selectedType)?.label} ë§Œë“¤ê¸°ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.`);
  }
};

// ë Œë”ë§ ì¶”ê°€
if (view === 'initial-form') {
  return (
    <InitialAssessmentForm
      siteId={currentSiteId}
      onCancel={handleBackToList}
      onSuccess={() => {
        handleBackToList();
        // ëª©ë¡ ìƒˆë¡œê³ ì¹¨
      }}
    />
  );
}
```

---

## 5. ìŠ¤íƒ€ì¼ë§ ê°€ì´ë“œ

### 5.1 í¼ ë ˆì´ì•„ì›ƒ
```tsx
// ì„¹ì…˜ ì»¨í…Œì´ë„ˆ
<div className="bg-white rounded-xl border border-gray-200 p-6 space-y-6">

// ì„¹ì…˜ ì œëª©
<h3 className="text-lg font-bold text-slate-700">ì‘ì—… ê³µì¢…</h3>

// í¼ í•„ë“œ ë ˆì´ë¸”
<label className="block text-sm font-medium text-slate-600 mb-2">
  í˜„ì¥ëª…
</label>

// ì½ê¸° ì „ìš© ê°’
<span className="text-slate-800">í†µì‚¬í†µì‚¬í˜„ì¥</span>
```

### 5.2 ê²€ìƒ‰ ì…ë ¥
```tsx
// ê²€ìƒ‰ ì…ë ¥ with ë“œë¡­ë‹¤ìš´
<div className="relative">
  <div className="flex items-center border border-gray-300 rounded-lg px-3 py-2
                  focus-within:border-orange-500 focus-within:ring-1 focus-within:ring-orange-500">
    <Search size={18} className="text-slate-400 mr-2" />
    <input
      type="text"
      placeholder="ëŒ€ë¶„ë¥˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."
      className="flex-1 outline-none text-sm"
    />
    {value && (
      <button onClick={onClear}>
        <X size={18} className="text-slate-400 hover:text-slate-600" />
      </button>
    )}
  </div>

  {/* ë“œë¡­ë‹¤ìš´ */}
  {isOpen && (
    <div className="absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200
                    rounded-lg shadow-lg max-h-60 overflow-y-auto z-50">
      {options.map(opt => (
        <button key={opt.id} onClick={() => onSelect(opt)}
                className="w-full px-4 py-3 text-left hover:bg-orange-50 text-sm">
          {opt.name}
        </button>
      ))}
    </div>
  )}
</div>
```

### 5.3 ì²´í¬ë°•ìŠ¤ ë¦¬ìŠ¤íŠ¸
```tsx
// ì²´í¬ë°•ìŠ¤ í•­ëª©
<label className="flex items-center gap-3 py-2 cursor-pointer hover:bg-gray-50 px-2 rounded">
  <input
    type="checkbox"
    checked={isChecked}
    onChange={onChange}
    className="w-5 h-5 rounded border-gray-300 text-orange-500
               focus:ring-orange-500 focus:ring-offset-0"
  />
  <span className="text-sm text-slate-700">{label}</span>
</label>

// ì„ íƒëœ í•­ëª© (ë¹¨ê°„ ì²´í¬)
<div className="flex items-center gap-2">
  <CheckCircle size={20} className="text-red-500" />
  <span className="text-sm text-slate-700">{label}</span>
</div>
```

### 5.4 ìœ„í—˜ì„± ìˆ˜ì¤€ ë¼ë””ì˜¤
```tsx
// ë¼ë””ì˜¤ ê·¸ë£¹
<div className="flex items-center gap-6">
  <span className="text-sm font-medium text-slate-600">ìœ„í—˜ì„± ìˆ˜ì¤€</span>

  {['HIGH', 'MEDIUM', 'LOW'].map((level) => (
    <label key={level} className="flex items-center gap-2 cursor-pointer">
      <input
        type="radio"
        name="riskLevel"
        value={level}
        checked={selected === level}
        onChange={() => onChange(level)}
        className="w-4 h-4 text-orange-500 focus:ring-orange-500"
      />
      <span className="text-sm text-slate-700">
        {level === 'HIGH' ? 'ìƒ' : level === 'MEDIUM' ? 'ì¤‘' : 'í•˜'}
      </span>
    </label>
  ))}
</div>
```

### 5.5 ì¹´ë“œ ì»¨í…Œì´ë„ˆ (ìœ„í—˜ ìš”ì¸)
```tsx
// ìœ„í—˜ ìš”ì¸ ì¹´ë“œ
<div className="bg-gray-50 border border-gray-200 rounded-xl p-4 space-y-4">
  {/* ì‚­ì œ ë²„íŠ¼ */}
  <div className="flex justify-end">
    <button
      onClick={onDelete}
      className="text-red-500 text-sm font-medium hover:text-red-600"
    >
      <Trash2 size={16} className="inline mr-1" />
      í•­ëª© ì‚­ì œ
    </button>
  </div>

  {/* í¼ í•„ë“œë“¤ */}
</div>
```

### 5.6 ëª¨ë‹¬
```tsx
// ëª¨ë‹¬ ì˜¤ë²„ë ˆì´
<div className="fixed inset-0 z-50 flex items-center justify-center">
  <div className="absolute inset-0 bg-black/50" onClick={onClose} />

  {/* ëª¨ë‹¬ ì½˜í…ì¸  */}
  <div className="relative bg-white rounded-2xl shadow-xl w-full max-w-md mx-4 p-6">
    {/* ë‹«ê¸° ë²„íŠ¼ */}
    <button
      onClick={onClose}
      className="absolute top-4 right-4 p-1 hover:bg-gray-100 rounded-lg"
    >
      <X size={20} className="text-slate-400" />
    </button>

    {/* ì œëª© */}
    <h2 className="text-lg font-bold text-slate-800 mb-4">{title}</h2>

    {/* ë‚´ìš© */}
    {children}

    {/* ë²„íŠ¼ */}
    <div className="flex gap-3 mt-6">
      <button
        onClick={onClose}
        className="flex-1 py-3 rounded-xl font-medium text-slate-600
                   bg-gray-100 hover:bg-gray-200"
      >
        ì·¨ì†Œ
      </button>
      <button
        onClick={onConfirm}
        className="flex-1 py-3 rounded-xl font-bold text-white
                   bg-gradient-to-r from-orange-500 to-orange-600
                   hover:from-orange-600 hover:to-orange-700"
      >
        {confirmText}
      </button>
    </div>
  </div>
</div>
```

### 5.7 ë¡œë”© ìŠ¤í”¼ë„ˆ
```tsx
// ì›í˜• ë¡œë”© ìŠ¤í”¼ë„ˆ (ë ˆí¼ëŸ°ìŠ¤ ì˜ìƒì˜ ë¹¨ê°„ ì›)
<div className="flex items-center justify-center py-8">
  <div className="w-16 h-16 border-4 border-red-200 border-t-red-500
                  rounded-full animate-spin" />
</div>
```

---

## 6. ìƒíƒœ ê´€ë¦¬

### 6.1 ì»¤ìŠ¤í…€ í›…: useInitialAssessment

```typescript
// src/pages/risk-assessment/hooks/useInitialAssessment.ts
import { useState, useCallback } from 'react';
import { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';
import { v4 as uuidv4 } from 'uuid';

export function useInitialAssessment(siteId: number) {
  const queryClient = useQueryClient();

  // í¼ ìƒíƒœ
  const [formState, setFormState] = useState<FormState>({
    approvalLineId: null,
    workPeriodStart: '',
    workPeriodEnd: '',
    categories: [],
  });

  // ëŒ€ë¶„ë¥˜ ëª©ë¡ ì¡°íšŒ
  const categoriesQuery = useQuery({
    queryKey: ['risk-categories'],
    queryFn: getRiskCategories,
  });

  // ìœ„í—˜ì„±í‰ê°€ ìƒì„±
  const createMutation = useMutation({
    mutationFn: createRiskAssessment,
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['risk-assessments'] });
    },
  });

  // ëŒ€ë¶„ë¥˜ ì¶”ê°€
  const addCategory = useCallback(() => {
    setFormState(prev => ({
      ...prev,
      categories: [
        ...prev.categories,
        {
          id: uuidv4(),
          categoryId: null,
          categoryName: '',
          subcategories: [],
        },
      ],
    }));
  }, []);

  // ëŒ€ë¶„ë¥˜ ì‚­ì œ
  const removeCategory = useCallback((categoryId: string) => {
    setFormState(prev => ({
      ...prev,
      categories: prev.categories.filter(c => c.id !== categoryId),
    }));
  }, []);

  // ì†Œë¶„ë¥˜ ì¶”ê°€
  const addSubcategory = useCallback((categoryId: string, subcategory: SubcategoryState) => {
    setFormState(prev => ({
      ...prev,
      categories: prev.categories.map(c =>
        c.id === categoryId
          ? { ...c, subcategories: [...c.subcategories, subcategory] }
          : c
      ),
    }));
  }, []);

  // ìœ„í—˜ ìš”ì¸ ì¶”ê°€
  const addRiskFactor = useCallback((
    categoryId: string,
    subcategoryId: string,
    factor: RiskFactorState
  ) => {
    setFormState(prev => ({
      ...prev,
      categories: prev.categories.map(c =>
        c.id === categoryId
          ? {
              ...c,
              subcategories: c.subcategories.map(s =>
                s.id === subcategoryId
                  ? { ...s, riskFactors: [...s.riskFactors, factor] }
                  : s
              ),
            }
          : c
      ),
    }));
  }, []);

  // ì œì¶œ
  const submit = useCallback(async () => {
    // ìœ íš¨ì„± ê²€ì‚¬
    if (!formState.workPeriodStart || !formState.workPeriodEnd) {
      throw new Error('ì‘ì—… ê¸°ê°„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
    }
    if (formState.categories.length === 0) {
      throw new Error('ì‘ì—… ê³µì¢…ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”.');
    }

    return createMutation.mutateAsync({
      siteId,
      ...formState,
    });
  }, [formState, siteId, createMutation]);

  return {
    formState,
    setFormState,
    categoriesQuery,
    createMutation,
    addCategory,
    removeCategory,
    addSubcategory,
    addRiskFactor,
    submit,
  };
}
```

---

## 7. API í•¨ìˆ˜

```typescript
// src/api/risk-assessment.ts
import { supabase } from '../lib/supabase';

// ëŒ€ë¶„ë¥˜ ëª©ë¡ ì¡°íšŒ
export async function getRiskCategories() {
  const { data, error } = await supabase
    .from('risk_categories')
    .select('*')
    .order('name');

  if (error) throw error;
  return data;
}

// ì†Œë¶„ë¥˜ ëª©ë¡ ì¡°íšŒ
export async function getRiskSubcategories(categoryId: number) {
  const { data, error } = await supabase
    .from('risk_subcategories')
    .select('*')
    .eq('category_id', categoryId)
    .order('name');

  if (error) throw error;
  return data;
}

// ìœ„í—˜ìš”ì¸ ëª©ë¡ ì¡°íšŒ
export async function getRiskFactors(subcategoryId: number) {
  const { data, error } = await supabase
    .from('risk_factors')
    .select('*')
    .eq('subcategory_id', subcategoryId);

  if (error) throw error;
  return data;
}

// ìœ„í—˜ì„±í‰ê°€ ìƒì„±
export async function createRiskAssessment(data: CreateRiskAssessmentInput) {
  const { data: result, error } = await supabase
    .from('risk_assessments')
    .insert({
      site_id: data.siteId,
      type: 'INITIAL',
      approval_line_id: data.approvalLineId,
      work_period_start: data.workPeriodStart,
      work_period_end: data.workPeriodEnd,
      status: 'DRAFT',
    })
    .select()
    .single();

  if (error) throw error;

  // í•­ëª©ë“¤ ì €ì¥
  const items = data.categories.flatMap(category =>
    category.subcategories.flatMap(sub =>
      sub.riskFactors.map(factor => ({
        assessment_id: result.id,
        category_id: category.categoryId,
        category_name: category.categoryName,
        subcategory_id: sub.subcategoryId,
        subcategory_name: sub.subcategoryName,
        risk_factor: factor.factor,
        risk_level: factor.level,
        improvement_measure: factor.improvement,
        work_period_start: factor.workPeriodStart,
        work_period_end: factor.workPeriodEnd,
      }))
    )
  );

  if (items.length > 0) {
    const { error: itemsError } = await supabase
      .from('risk_assessment_items')
      .insert(items);

    if (itemsError) throw itemsError;
  }

  return result;
}
```

---

## 8. ë””ìì¸ ì‹œìŠ¤í…œ ì°¸ì¡°

**ì°¸ì¡° ë¬¸ì„œ**: `docs/design_guideline_251221.md`, `CLAUDE.md`

| í•­ëª© | ê°’ |
|------|-----|
| Primary | `orange-500` (#F97316) |
| Primary Gradient | `from-orange-500 to-orange-600` |
| ì¹´ë“œ ë¼ìš´ë”© | `rounded-xl` (12px) |
| ë²„íŠ¼ ë¼ìš´ë”© | `rounded-xl` |
| ì…ë ¥ í•„ë“œ ë†’ì´ | `py-2.5` (40px ì •ë„) |
| í°íŠ¸ - í˜ì´ì§€ ì œëª© | `text-xl font-black` |
| í°íŠ¸ - ì„¹ì…˜ ì œëª© | `text-lg font-bold` |
| í°íŠ¸ - ë ˆì´ë¸” | `text-sm font-medium` |

---

## 9. êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

### í•„ìˆ˜
- [ ] `InitialAssessmentForm.tsx` ìƒì„±
- [ ] `BasicInfoSection.tsx` ìƒì„±
- [ ] `WorkCategorySection.tsx` ìƒì„±
- [ ] `CategoryItem.tsx` ìƒì„±
- [ ] `CategorySearchInput.tsx` ìƒì„±
- [ ] `SubcategoryCheckList.tsx` ìƒì„±
- [ ] `RiskFactorCard.tsx` ìƒì„±
- [ ] `SubcategoryAddModal.tsx` ìƒì„±
- [ ] `RiskFactorSelectModal.tsx` ìƒì„±
- [ ] `SuccessModal.tsx` ìƒì„±
- [ ] `useInitialAssessment.ts` í›… ìƒì„±
- [ ] `risk-assessment.ts` API í•¨ìˆ˜ ìƒì„±
- [ ] `RiskAssessmentPage.tsx` ìˆ˜ì • (ë¼ìš°íŒ… ì¶”ê°€)

### ì¶”ê°€
- [ ] ë‚ ì§œ ì„ íƒê¸° ì»´í¬ë„ŒíŠ¸ (DateRangePicker)
- [ ] í¼ ìœ íš¨ì„± ê²€ì‚¬
- [ ] ë¡œë”©/ì—ëŸ¬ ìƒíƒœ ì²˜ë¦¬
- [ ] ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ í™•ì¸

---

## 10. ì—°ê²° ë¬¸ì„œ

- **ê¸°íš ë¬¸ì„œ**: `docs/ui-specs/pc/plans/2026-01-16-ìµœì´ˆìœ„í—˜ì„±í‰ê°€ë§Œë“¤ê¸°-ê¸°íš.md`
- **ë””ìì¸ ê°€ì´ë“œ**: `docs/design_guideline_251221.md`
- **í”„ë¡œì íŠ¸ ê°€ì´ë“œ**: `CLAUDE.md`
- **ê¸°ì¡´ í˜ì´ì§€**: `src/pages/RiskAssessmentPage.tsx`
- **ê¸°ì¡´ ëª¨ë‹¬ ì°¸ê³ **: `src/components/workers/WorkerAddModal.tsx`
